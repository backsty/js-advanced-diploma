(()=>{"use strict";class e{constructor(e=8){this.boardSize=e,this.container=null,this.boardEl=null,this.cells=[],this.cellClickListeners=[],this.cellEnterListeners=[],this.cellLeaveListeners=[],this.newGameListeners=[],this.saveGameListeners=[],this.loadGameListeners=[],this.escListener=null}bindToDOM(e){if(!(e instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=e}drawUi(e){this.checkBinding(),this.container.innerHTML='\n      <div class="controls">\n        <button data-id="action-restart" class="btn">New Game</button>\n        <button data-id="action-save" class="btn">Save Game</button>\n        <button data-id="action-load" class="btn">Load Game</button>\n      </div>\n      <div class="board-container">\n        <div data-id="board" class="board"></div>\n      </div>\n    ',this.newGameEl=this.container.querySelector("[data-id=action-restart]"),this.saveGameEl=this.container.querySelector("[data-id=action-save]"),this.loadGameEl=this.container.querySelector("[data-id=action-load]"),this.newGameEl.addEventListener("click",(e=>this.onNewGameClick(e))),this.saveGameEl.addEventListener("click",(e=>this.onSaveGameClick(e))),this.loadGameEl.addEventListener("click",(e=>this.onLoadGameClick(e))),document.addEventListener("keydown",(e=>this.onEsc(e))),this.boardEl=this.container.querySelector("[data-id=board]"),this.boardEl.setAttribute("style",`grid-template-columns: repeat(${this.boardSize}, 1fr)`),this.boardEl.classList.add(e);for(let e=0;e<this.boardSize**2;e+=1){const i=document.createElement("div");i.classList.add("cell","map-tile","map-tile-"+(t=e,s=this.boardSize,0===t?"top-left":t>0&&t<s-1?"top":t===s-1?"top-right":t===s*s-1?"bottom-right":t>s*(s-1)&&t<s*s-1?"bottom":t%s==s-1?"right":t===s*(s-1)?"bottom-left":t%s==0?"left":"center")),i.addEventListener("mouseenter",(e=>this.onCellEnter(e))),i.addEventListener("mouseleave",(e=>this.onCellLeave(e))),i.addEventListener("click",(e=>this.onCellClick(e))),this.boardEl.appendChild(i)}var t,s;this.cells=Array.from(this.boardEl.children)}redrawPositions(e){for(const e of this.cells)e.innerHTML="";for(const s of e){const e=this.boardEl.children[s.position],i=document.createElement("div");i.classList.add("character",s.character.type);const a=document.createElement("div");a.classList.add("health-level");const r=document.createElement("div");r.classList.add("health-level-indicator","health-level-indicator-"+((t=s.character.health)<15?"critical":t<50?"normal":"high")),r.style.width=`${s.character.health}%`,a.appendChild(r),i.appendChild(a),e.appendChild(i)}var t}addCellEnterListener(e){this.cellEnterListeners.push(e)}addCellLeaveListener(e){this.cellLeaveListeners.push(e)}addCellClickListener(e){this.cellClickListeners.push(e)}addNewGameListener(e){this.newGameListeners.push(e)}addSaveGameListener(e){this.saveGameListeners.push(e)}addLoadGameListener(e){this.loadGameListeners.push(e)}addEscListener(e){this.escListener=e,document.addEventListener("keydown",this.onEsc.bind(this))}onCellEnter(e){e.preventDefault();const t=this.cells.indexOf(e.currentTarget);this.cellEnterListeners.forEach((e=>e.call(null,t)))}onCellLeave(e){e.preventDefault();const t=this.cells.indexOf(e.currentTarget);this.cellLeaveListeners.forEach((e=>e.call(null,t)))}onCellClick(e){const t=this.cells.indexOf(e.currentTarget);this.cellClickListeners.forEach((e=>e.call(null,t)))}onNewGameClick(e){e.preventDefault(),this.newGameListeners.forEach((e=>e.call(null)))}onSaveGameClick(e){e.preventDefault(),this.saveGameListeners.forEach((e=>e.call(null)))}onLoadGameClick(e){e.preventDefault(),this.loadGameListeners.forEach((e=>e.call(null)))}onEsc(e){"Escape"===e.key&&(e.preventDefault(),"function"==typeof this.escListener&&this.escListener())}static showError(e){alert(e)}static showMessage(e){alert(e)}selectCell(e,t="yellow"){this.deselectCell(e),this.cells[e].classList.add("selected",`selected-${t}`)}deselectCell(e){const t=this.cells[e];t.classList.remove(...Array.from(t.classList).filter((e=>e.startsWith("selected"))))}deselectAll(){const{cells:e}=this;e.forEach((t=>this.deselectCell(e.indexOf(t))))}showCellTooltip(e,t){this.cells[t].title=e}hideCellTooltip(e){this.cells[e].title=""}showDamage(e,t){return new Promise((s=>{const i=this.cells[e],a=document.createElement("span");a.textContent=t,a.classList.add("damage"),i.appendChild(a),a.addEventListener("animationend",(()=>{i.removeChild(a),s()}))}))}setCursor(e){this.boardEl.style.cursor=e}checkBinding(){if(null===this.container)throw new Error("GamePlay not bind to DOM")}}const t="prairie",s="desert",i="arctic",a="mountain",r="auto",o="pointer",h="crosshair",l="not-allowed";class n{constructor(){this.currentStep="player"}static from(e){return e&&"object"==typeof e&&!Array.isArray(e)?{level:e.level,positions:e.positionsToDraw,theme:e.theme,score:e.score}:null}}class c{constructor(){this.characters=new Set}add(e){if(!e)throw new Error("Character cannot be null or undefined");if(this.characters.has(e))throw new Error("Character already exists");this.characters.add(e)}addAll(...e){if(0===e.length)throw new Error("No characters provided");e.forEach((e=>{try{this.add(e)}catch(e){if("Character already exists"!==e.message)throw e}}))}toArray(){this.characters=Array.from(this.characters)}}function d(e,t,s){if(!e||0===e.length)throw new Error("Allowed types array cannot be empty");if(s<=0)throw new Error("Character count must be positive");const i=function*(e,t){for(;;){const s=Math.floor(Math.random()*e.length),i=Math.floor(Math.random()*t)+1;yield{character:new e[s](i),level:i}}}(e,t),a=new c;for(let e=0;e<s;e+=1){const e=i.next().value;a.add(e.character)}return a.toArray(),a.characters}class m{constructor(e,t="generic"){if(this.level=e,this.attack=0,this.defence=0,this.health=50,this.type=t,this.distance=1,this.distanceAttack=1,"Character"===new.target.name)throw new Error("Ð”Ð°Ð½Ð½Ñ‹Ð¹ ÐºÐ»Ð°ÑÑ Ð½ÐµÐ»ÑŒÐ·Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð¶Ð°")}}class y{constructor(e,t,s){if(!(e instanceof m))throw new Error("character must be instance of Character or its children");const i=parseInt(s,10);if(Number.isNaN(i))throw new Error("position must be a valid number");if(i<0)throw new Error("position must be a non-negative number");this.character=e,this.side=t,this.position=i}}class u extends m{constructor(e,t="bowman"){super(e,t),this.attack=25,this.defence=25,this.distance=2,this.distanceAttack=2}}class g extends m{constructor(e=1,t="swordsman"){super(e,t),this.attack=40,this.defence=10,this.distance=4,this.distanceAttack=1}}class p extends m{constructor(e=1,t="magician"){super(e,t),this.attack=10,this.defence=40,this.distance=1,this.distanceAttack=4}}class w extends m{constructor(e=1,t="vampire"){super(e,t),this.attack=25,this.defence=25,this.distance=2,this.distanceAttack=2}}class f extends m{constructor(e=1,t="undead"){super(e,t),this.attack=40,this.defence=10,this.distance=4,this.distanceAttack=1}}class v extends m{constructor(e=1,t="daemon"){super(e,t),this.attack=10,this.defence=10,this.distance=1,this.distanceAttack=4}}const P=new e;P.bindToDOM(document.querySelector("#game-container"));const b=new class{constructor(e){this.storage=e}save(e){this.storage.setItem("state",JSON.stringify(e))}load(){const e=this.storage.getItem("state");if(!e)throw new Error("Invalid state");try{return JSON.parse(e)}catch{throw new Error("Invalid state")}}}(localStorage),E=new class{constructor(e,t){if(!e)throw new Error("gamePlay instance is required");this.gamePlay=e,this.stateService=t,this.sides={player:{name:"player",first:0,second:1,characters:[g,u,p]},enemy:{name:"enemy",first:this.gamePlay.boardSize-1,second:this.gamePlay.boardSize-2,characters:[f,w,v]}},this.level=1,this.score=0,this.attack=[],this.statuses={freespace:"free space",enemy:"enemy",allied:"allied",notallowed:"notallowed"},this.movements=[],this.selected=null,this.currentStatus=null,this.positionsToDraw=[],this.isActionInProgress=!1,this.area=this.getRowArray()}init(){document.addEventListener("DOMContentLoaded",(()=>{const e=JSON.parse(sessionStorage.getItem("reload"));e?this.loadState(e):(this.theme=t,this.gamePlay.drawUi(this.theme))})),this.mouseEvents(),window.addEventListener("unload",(()=>{sessionStorage.setItem("reload",JSON.stringify(n.from(this)))}))}mouseEvents(){this.gamePlay.addCellClickListener(this.onCellClick.bind(this)),this.gamePlay.addCellEnterListener(this.onCellEnter.bind(this)),this.gamePlay.addCellLeaveListener(this.onCellLeave.bind(this)),this.gamePlay.addEscListener(this.onEsc.bind(this)),this.gamePlay.addNewGameListener(this.newGame.bind(this,this.level,this.theme)),this.gamePlay.addSaveGameListener(this.saveGame.bind(this)),this.gamePlay.addLoadGameListener(this.loadGame.bind(this))}positions(){const e=[];for(let t=0;t<this.gamePlay.boardSize**2;t+=1)e.push(t);return{array:e,row:this.gamePlay.boardSize,length:e.length}}sidePositions(e){const t=this.positions();return t.array.filter((s=>s%t.row===e.first||s%t.row===e.second)).map((e=>e))}getPosition(e){if(!Array.isArray(e)||0===e.length)throw new Error("side must be a non-empty array");const t=Math.floor(Math.random()*e.length),s=e[t];if("number"!=typeof s)throw new Error("Invalid cell position");return e.splice(t,1),s}newGame(e=1,s=t){this.level=e,this.gamePlay.deselectAll(),this.selected=null,this.theme=s,this.gamePlay.drawUi(this.theme),1===e&&(this.positionsToDraw=[]);const i=Array.from(this.sidePositions(this.sides.player)),a=Array.from(this.sidePositions(this.sides.enemy));if(this.positionsToDraw.length){this.positionsToDraw.forEach((e=>{e.position=this.getPosition(i)}));const t=Array.from(this.sidePositions(this.sides.player)).filter((e=>!this.positionsToDraw.find((t=>t.position===e)))),s=this.positionsToDraw.length;let r;2===e&&(r=d(this.sides.player.characters,e-1,1)),3!==e&&4!==e||(r=d(this.sides.player.characters,e-1,2));const o=d(this.sides.enemy.characters,e,r.length+s);this.positionsToDraw.push(r.map((e=>new y(e,this.sides.player.name,this.getPosition(t))))),this.positionsToDraw.push(o.map((e=>new y(e,this.sides.enemy.name,this.getPosition(a))))),this.positionsToDraw=this.positionsToDraw.flat()}else{const t=d([g,u],e,2),s=d(this.sides.enemy.characters,e,2);this.positionsToDraw=[...t.map((e=>new y(e,this.sides.player.name,this.getPosition(i)))),...s.map((e=>new y(e,this.sides.enemy.name,this.getPosition(a))))].flat()}this.gamePlay.redrawPositions(this.positionsToDraw)}saveGame(){if(this.positionsToDraw.length){const t=n.from(this);this.stateService.save(t),e.showMessage("Game saved")}else e.showError("No saved games")}loadGame(){const t=this.stateService.load();t?(this.loadState(t),e.showMessage("Game loaded")):e.showError("No saved games")}loadState(e){if(!e)return;this.gamePlay.deselectAll(),this.selected=null;const{level:s,positions:i,theme:a,score:r}=e;this.level=s||1,this.positionsToDraw=i,this.theme=a||t,this.score=r||0,this.gamePlay.drawUi(this.theme),Array.isArray(this.positionsToDraw)&&this.positionsToDraw.length>0&&this.gamePlay.redrawPositions(this.positionsToDraw)}onEsc(){this.clear(),this.score=0,this.gamePlay.drawUi(this.theme)}clear(){this.level=1,this.positionsToDraw=[],this.selected=null,this.theme=t}levelUp(){switch(this.level+=1,this.positionsToDraw.forEach((e=>{e.character.level=this.level,e.character.attack=Math.ceil(Math.max(e.character.attack,e.character.attack*(1.8-(1===e.character.health?80:e.character.health)/100))),e.character.defence=Math.ceil(Math.max(e.character.defence,e.character.defence*(1.8-(1===e.character.health?80:e.character.health)/100))),e.character.health=Math.ceil(e.character.health+80>100?100:e.character.health+80)})),this.level){case 2:this.gamePlay.drawUi(s),this.theme=s;break;case 3:this.gamePlay.drawUi(i),this.theme=i;break;case 4:this.gamePlay.drawUi(a),this.theme=a;break;default:this.gamePlay.drawUi(t),this.theme=t}return this.level}getRowArray(){const e=[];let t=[];for(let s=0;s<this.gamePlay.boardSize**2;s+=1)t.push(s),t.length===this.gamePlay.boardSize&&(e.push(t),t=[]);return e}getAreaMove(e,t){if(!e||void 0===t)return[];const s=this.gamePlay.boardSize,i=e.position%s,a=Math.floor(e.position/s),r=[],o=Number(t)||1;for(let e=1;e<=o;e+=1){let t=i+e;t<s&&this.area[a]&&r.push(this.area[a][t]);let o=a+e;o<s&&this.area[o]&&r.push(this.area[o][i]),o<s&&t<s&&this.area[o]&&r.push(this.area[o][t]),t=i-e,t>=0&&this.area[a]&&r.push(this.area[a][t]),t>=0&&o<s&&this.area[o]&&r.push(this.area[o][t]),o=a-e,o>=0&&this.area[o]&&r.push(this.area[o][i]),o>=0&&t>=0&&this.area[o]&&r.push(this.area[o][t]),t=i+e,t<s&&o>=0&&this.area[o]&&r.push(this.area[o][t])}return r.filter((e=>void 0!==e&&e>=0))}getAreaAttack(e,t){const s=[];for(let i=e.position-this.gamePlay.boardSize*t;i<=e.position+this.gamePlay.boardSize*t;i+=this.gamePlay.boardSize)if(i>=0&&i<this.gamePlay.boardSize**2)for(let e=i-t;e<=i+t;e+=1)e>=i-i%this.gamePlay.boardSize&&e<i+(this.gamePlay.boardSize-i%this.gamePlay.boardSize)&&s.push(e);return s.splice(s.indexOf(e.position),1),s}moveDefending(e,t,s){const i=this.getAreaMove(e,e.character.distance).filter((e=>-1===this.positionsToDraw.findIndex((t=>t.position===e)))),a=e=>({x:e.position%this.gamePlay.boardSize,y:Math.floor(e.position/this.gamePlay.boardSize)}),r=a(e),o=a(t),h=(()=>o.x<=r.x?o.y<=r.y?i.filter((e=>e%this.gamePlay.boardSize>=o.x&&e%this.gamePlay.boardSize<=r.x&&Math.floor(e/this.gamePlay.boardSize)<=r.y&&Math.floor(e/this.gamePlay.boardSize)>=o.y)):i.filter((e=>e%this.gamePlay.boardSize>=o.x&&e%this.gamePlay.BoardSize<=r.x&&Math.floor(e/this.gamePlay.boardSize)>r.y&&Math.floor(e/this.gamePlay.boardSize)<=o.y)):o.y<=r.y?i.filter((e=>e%this.gamePlay.boardSize<=o.x&&e%this.gamePlay.boardSize>r.x&&Math.floor(e/this.gamePlay.boardSize)<=r.y&&Math.floor(e/this.gamePlay.boardSize)>=o.y)):i.filter((e=>e%this.gamePlay.boardSize<=o.x&&e%this.gamePlay.boardSize>r.x&&Math.floor(e/this.gamePlay.boardSize)>r.y&&Math.floor(e/this.gamePlay.boardSize)<=o.y)))();if(!h.length){if(!i.length){const t=[...s];t.splice(s.indexOf(e),1),e=t[Math.floor(Math.random()*t.length)]}const t=this.getAreaMove(e,e.character.distance).filter((e=>-1===this.positionsToDraw.findIndex((t=>t.position===e))));return t[Math.floor(Math.random()*t.length)]}return h[Math.floor(Math.random()*h.length)]}calculateDamage(e,t){return Math.max(e.character.attack-t.character.defence,Math.ceil(.1*e.character.attack))}moveEnemyAttack(){this.isActionInProgress=!0,this.gamePlay.deselectAll();const e=this.positionsToDraw.filter((e=>e.side===this.sides.enemy.name)),t=e.find((t=>t.character.attack===Math.max.apply(null,e.map((e=>e.character.attack)))));return new Promise(((s,i)=>{const a=this.calculateDamage(t,this.selected);this.getAreaAttack(t,t.character.distanceAttack).includes(this.selected.position)?(this.selected.character.health=Math.max(0,this.selected.character.health-a),s(a)):i({enemyAttacker:t,enemies:e})}))}onCellClick(t){if(this.isActionInProgress)return;if(t<0||t>=this.gamePlay.boardSize**2)return;const s=()=>{if(this.isActionInProgress=!1,this.selected&&this.selected.character.health<=0&&(this.positionsToDraw=this.positionsToDraw.filter((e=>e!==this.selected)),this.selected=null),this.gamePlay.redrawPositions(this.positionsToDraw),!this.positionsToDraw.some((e=>e.side===this.sides.player.name)))return e.showMessage("Ð˜Ð³Ñ€Ð° Ð¾ÐºÐ¾Ð½Ñ‡ÐµÐ½Ð°!"),this.clear(),this.score=0,void this.gamePlay.drawUi(this.theme);this.selected&&(this.gamePlay.selectCell(this.selected.position,"yellow"),this.movements=this.getAreaMove(this.selected,this.selected.character.distance),this.attacks=this.getAreaAttack(this.selected,this.selected.character.distanceAttack))},i=this.positionsToDraw.find((e=>e.position===t));if(null!==this.selected){if(this.currentStatus!==this.statuses.freespace||i){if(i&&i.side===this.sides.player.name)return this.gamePlay.deselectCell(this.selected.position),this.selected=i,this.gamePlay.selectCell(t,"yellow"),this.movements=this.getAreaMove(this.selected,this.selected.character.distance),void(this.attacks=this.getAreaAttack(this.selected,this.selected.character.distanceAttack));if(this.currentStatus===this.statuses.enemy&&this.attacks.includes(t)&&i?.side===this.sides.enemy.name){this.isActionInProgress=!0;const a=this.calculateDamage(this.selected,i);i.character.health=Math.max(0,i.character.health-a);const r=i.character.health<=0;this.gamePlay.showDamage(t,a).then((()=>r&&(this.positionsToDraw=this.positionsToDraw.filter((e=>e!==i)),this.gamePlay.redrawPositions(this.positionsToDraw),!this.positionsToDraw.some((e=>e.side===this.sides.enemy.name)))?(this.score+=this.positionsToDraw.reduce(((e,t)=>e+t.character.health),0),4===this.level?(e.showMessage(`ÐŸÐ¾Ð±ÐµÐ´Ð°! Ð’Ð°Ñˆ ÑÑ‡ÐµÑ‚ Ñ€Ð°Ð²ÐµÐ½ ${this.score}.`),this.clear(),this.gamePlay.drawUi(this.theme),Promise.resolve()):(e.showMessage(`ÐŸÐ¾Ð±ÐµÐ´Ð°! ÐŸÐµÑ€ÐµÑ…Ð¾Ð´ Ð½Ð° ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ ${this.level+1}! Ð’Ð°Ñˆ ÑÑ‡ÐµÑ‚ Ñ€Ð°Ð²ÐµÐ½ ${this.score}.`),this.newGame(this.levelUp(),this.theme),Promise.resolve())):this.moveEnemyAttack())).then((e=>{if(e&&this.selected)return this.selected.character.health=Math.max(0,this.selected.character.health-e),this.gamePlay.showDamage(this.selected.position,e)}),(({enemyAttacker:e,enemies:t})=>{e&&t.length>0&&(e.position=this.moveDefending(e,this.selected,t),this.gamePlay.redrawPositions(this.positionsToDraw))})).then(s)}else e.showError("ÐÐµÐ´Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼Ð¾Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ!")}else if(this.movements.includes(t)){const e=this.selected.position;this.selected.position=t,this.gamePlay.deselectCell(e),this.gamePlay.selectCell(t,"yellow"),this.gamePlay.redrawPositions(this.positionsToDraw),this.moveEnemyAttack().then((e=>e?this.gamePlay.showDamage(this.selected.position,e).then((()=>(this.gamePlay.selectCell(this.selected.position,"yellow"),s()))):s()),(({enemyAttacker:e,enemies:t})=>(e&&t.length>0&&(e.position=this.moveDefending(e,this.selected,t),this.gamePlay.redrawPositions(this.positionsToDraw),this.gamePlay.selectCell(this.selected.position,"yellow")),s()))).catch((e=>{console.error("Error during enemy move:",e),this.gamePlay.redrawPositions(this.positionsToDraw)}))}}else{if(!i)return;i.side===this.sides.player.name?(this.selected=i,this.gamePlay.selectCell(t,"yellow"),this.movements=this.getAreaMove(this.selected,this.selected.character.distance),this.attacks=this.getAreaAttack(this.selected,this.selected.character.distanceAttack)):e.showError("Ð­Ñ‚Ð¾ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð¶ Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð½Ð¸ÐºÐ°!")}}onCellEnter(e){if(e||0===e){if(Array.isArray(this.positionsToDraw)){const t=this.positionsToDraw.find((t=>t.position===e));t&&this.gamePlay.showCellTooltip(function({level:e,attack:t,defence:s,health:i}){return`ðŸŽ–${e} âš”${t} ðŸ›¡${s} â¤${i}`}(t.character),e)}if(this.selected){const t={distance:this.selected.character.distance,distanceAttack:this.selected.character.distanceAttack};this.movements=this.getAreaMove(this.selected,t.distance),this.attacks=this.getAreaAttack(this.selected,t.distanceAttack);const s=this.positionsToDraw.find((t=>t.position===e));this.attacks.includes(e)&&s&&s.side===this.sides.enemy.name?(this.gamePlay.selectCell(e,"red"),this.gamePlay.setCursor(h),this.currentStatus=this.statuses.enemy):this.movements.includes(e)&&!s?(this.gamePlay.selectCell(e,"green"),this.gamePlay.setCursor(o),this.currentStatus=this.statuses.freespace):s&&s.side===this.sides.player.name?(this.gamePlay.setCursor(o),this.currentStatus=this.statuses.allied):(this.gamePlay.setCursor(l),this.currentStatus=this.statuses.notallowed)}}}onCellLeave(e){this.gamePlay.hideCellTooltip(e),this.selected&&e!==this.selected.position&&this.gamePlay.deselectCell(e),this.gamePlay.setCursor(r)}}(P,b);E.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLOEksU0FBU2pELFVBQVU2SixHQUN4QjFQLEtBQUt3SyxjQUFnQnhLLEtBQUtrSyxTQUFTRyxXQUV2QyxDQWhEQSxDQWlERixDQUVBaEksV0FBQUEsQ0FBWUYsR0FDVm5DLEtBQUs4SSxTQUFTekQsZ0JBQWdCbEQsR0FDMUJuQyxLQUFLdUssVUFBWXBJLElBQVVuQyxLQUFLdUssU0FBU3pILFVBQzNDOUMsS0FBSzhJLFNBQVNoRSxhQUFhM0MsR0FFN0JuQyxLQUFLOEksU0FBU2pELFVBQVU2SixFQUMxQixHRjdxQmtDNUcsRUFBVUMsR0FDOUNZLEVBQVNpQixNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vanMtYWR2YW5jZWQtZGlwbG9tYS8uL3NyYy9qcy9HYW1lUGxheS5qcyIsIndlYnBhY2s6Ly9qcy1hZHZhbmNlZC1kaXBsb21hLy4vc3JjL2pzL3V0aWxzLmpzIiwid2VicGFjazovL2pzLWFkdmFuY2VkLWRpcGxvbWEvLi9zcmMvanMvdGhlbWVzLmpzIiwid2VicGFjazovL2pzLWFkdmFuY2VkLWRpcGxvbWEvLi9zcmMvanMvY3Vyc29ycy5qcyIsIndlYnBhY2s6Ly9qcy1hZHZhbmNlZC1kaXBsb21hLy4vc3JjL2pzL0dhbWVTdGF0ZS5qcyIsIndlYnBhY2s6Ly9qcy1hZHZhbmNlZC1kaXBsb21hLy4vc3JjL2pzL1RlYW0uanMiLCJ3ZWJwYWNrOi8vanMtYWR2YW5jZWQtZGlwbG9tYS8uL3NyYy9qcy9nZW5lcmF0b3JzLmpzIiwid2VicGFjazovL2pzLWFkdmFuY2VkLWRpcGxvbWEvLi9zcmMvanMvQ2hhcmFjdGVyLmpzIiwid2VicGFjazovL2pzLWFkdmFuY2VkLWRpcGxvbWEvLi9zcmMvanMvUG9zaXRpb25lZENoYXJhY3Rlci5qcyIsIndlYnBhY2s6Ly9qcy1hZHZhbmNlZC1kaXBsb21hLy4vc3JjL2pzL2NoYXJhY3RlcnMvQm93bWFuLmpzIiwid2VicGFjazovL2pzLWFkdmFuY2VkLWRpcGxvbWEvLi9zcmMvanMvY2hhcmFjdGVycy9Td29yZHNtYW4uanMiLCJ3ZWJwYWNrOi8vanMtYWR2YW5jZWQtZGlwbG9tYS8uL3NyYy9qcy9jaGFyYWN0ZXJzL01hZ2ljaWFuLmpzIiwid2VicGFjazovL2pzLWFkdmFuY2VkLWRpcGxvbWEvLi9zcmMvanMvY2hhcmFjdGVycy9WYW1waXJlLmpzIiwid2VicGFjazovL2pzLWFkdmFuY2VkLWRpcGxvbWEvLi9zcmMvanMvY2hhcmFjdGVycy9VbmRlYWQuanMiLCJ3ZWJwYWNrOi8vanMtYWR2YW5jZWQtZGlwbG9tYS8uL3NyYy9qcy9jaGFyYWN0ZXJzL0RhZW1vbi5qcyIsIndlYnBhY2s6Ly9qcy1hZHZhbmNlZC1kaXBsb21hLy4vc3JjL2pzL2FwcC5qcyIsIndlYnBhY2s6Ly9qcy1hZHZhbmNlZC1kaXBsb21hLy4vc3JjL2pzL0dhbWVTdGF0ZVNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vanMtYWR2YW5jZWQtZGlwbG9tYS8uL3NyYy9qcy9HYW1lQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjYWxjSGVhbHRoTGV2ZWwsIGNhbGNUaWxlVHlwZSB9IGZyb20gJy4vdXRpbHMuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVBsYXkge1xyXG4gIGNvbnN0cnVjdG9yKGJvYXJkU2l6ZSA9IDgpIHtcclxuICAgIHRoaXMuYm9hcmRTaXplID0gYm9hcmRTaXplO1xyXG4gICAgdGhpcy5jb250YWluZXIgPSBudWxsO1xyXG4gICAgdGhpcy5ib2FyZEVsID0gbnVsbDtcclxuICAgIHRoaXMuY2VsbHMgPSBbXTtcclxuICAgIHRoaXMuY2VsbENsaWNrTGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLmNlbGxFbnRlckxpc3RlbmVycyA9IFtdO1xyXG4gICAgdGhpcy5jZWxsTGVhdmVMaXN0ZW5lcnMgPSBbXTtcclxuICAgIHRoaXMubmV3R2FtZUxpc3RlbmVycyA9IFtdO1xyXG4gICAgdGhpcy5zYXZlR2FtZUxpc3RlbmVycyA9IFtdO1xyXG4gICAgdGhpcy5sb2FkR2FtZUxpc3RlbmVycyA9IFtdO1xyXG4gICAgdGhpcy5lc2NMaXN0ZW5lciA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBiaW5kVG9ET00oY29udGFpbmVyKSB7XHJcbiAgICBpZiAoIShjb250YWluZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb250YWluZXIgaXMgbm90IEhUTUxFbGVtZW50Jyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERyYXdzIGJvYXJkRWwgd2l0aCBzcGVjaWZpYyB0aGVtZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHRoZW1lXHJcbiAgICovXHJcbiAgZHJhd1VpKHRoZW1lKSB7XHJcbiAgICB0aGlzLmNoZWNrQmluZGluZygpO1xyXG5cclxuICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9IGBcclxuICAgICAgPGRpdiBjbGFzcz1cImNvbnRyb2xzXCI+XHJcbiAgICAgICAgPGJ1dHRvbiBkYXRhLWlkPVwiYWN0aW9uLXJlc3RhcnRcIiBjbGFzcz1cImJ0blwiPk5ldyBHYW1lPC9idXR0b24+XHJcbiAgICAgICAgPGJ1dHRvbiBkYXRhLWlkPVwiYWN0aW9uLXNhdmVcIiBjbGFzcz1cImJ0blwiPlNhdmUgR2FtZTwvYnV0dG9uPlxyXG4gICAgICAgIDxidXR0b24gZGF0YS1pZD1cImFjdGlvbi1sb2FkXCIgY2xhc3M9XCJidG5cIj5Mb2FkIEdhbWU8L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJib2FyZC1jb250YWluZXJcIj5cclxuICAgICAgICA8ZGl2IGRhdGEtaWQ9XCJib2FyZFwiIGNsYXNzPVwiYm9hcmRcIj48L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIHRoaXMubmV3R2FtZUVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9YWN0aW9uLXJlc3RhcnRdJyk7XHJcbiAgICB0aGlzLnNhdmVHYW1lRWwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1hY3Rpb24tc2F2ZV0nKTtcclxuICAgIHRoaXMubG9hZEdhbWVFbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPWFjdGlvbi1sb2FkXScpO1xyXG5cclxuICAgIHRoaXMubmV3R2FtZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5vbk5ld0dhbWVDbGljayhldmVudCkpO1xyXG4gICAgdGhpcy5zYXZlR2FtZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5vblNhdmVHYW1lQ2xpY2soZXZlbnQpKTtcclxuICAgIHRoaXMubG9hZEdhbWVFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHRoaXMub25Mb2FkR2FtZUNsaWNrKGV2ZW50KSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB0aGlzLm9uRXNjKGV2ZW50KSk7XHJcblxyXG4gICAgdGhpcy5ib2FyZEVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9Ym9hcmRdJyk7XHJcbiAgICAvLyDQryDQtNC+0LHQsNCy0LjQuyBcclxuICAgIHRoaXMuYm9hcmRFbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KCR7dGhpcy5ib2FyZFNpemV9LCAxZnIpYCk7XHJcblxyXG4gICAgdGhpcy5ib2FyZEVsLmNsYXNzTGlzdC5hZGQodGhlbWUpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJvYXJkU2l6ZSAqKiAyOyBpICs9IDEpIHtcclxuICAgICAgY29uc3QgY2VsbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIGNlbGxFbC5jbGFzc0xpc3QuYWRkKCdjZWxsJywgJ21hcC10aWxlJywgYG1hcC10aWxlLSR7Y2FsY1RpbGVUeXBlKGksIHRoaXMuYm9hcmRTaXplKX1gKTtcclxuICAgICAgY2VsbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBldmVudCA9PiB0aGlzLm9uQ2VsbEVudGVyKGV2ZW50KSk7XHJcbiAgICAgIGNlbGxFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZXZlbnQgPT4gdGhpcy5vbkNlbGxMZWF2ZShldmVudCkpO1xyXG4gICAgICBjZWxsRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB0aGlzLm9uQ2VsbENsaWNrKGV2ZW50KSk7XHJcbiAgICAgIHRoaXMuYm9hcmRFbC5hcHBlbmRDaGlsZChjZWxsRWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2VsbHMgPSBBcnJheS5mcm9tKHRoaXMuYm9hcmRFbC5jaGlsZHJlbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEcmF3cyBwb3NpdGlvbnMgKHdpdGggY2hhcnMpIG9uIGJvYXJkRWxcclxuICAgKlxyXG4gICAqIEBwYXJhbSBwb3NpdGlvbnMgYXJyYXkgb2YgUG9zaXRpb25lZENoYXJhY3RlciBvYmplY3RzXHJcbiAgICovXHJcbiAgcmVkcmF3UG9zaXRpb25zKHBvc2l0aW9ucykge1xyXG4gICAgZm9yIChjb25zdCBjZWxsIG9mIHRoaXMuY2VsbHMpIHtcclxuICAgICAgY2VsbC5pbm5lckhUTUwgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIHBvc2l0aW9ucykge1xyXG4gICAgICBjb25zdCBjZWxsRWwgPSB0aGlzLmJvYXJkRWwuY2hpbGRyZW5bcG9zaXRpb24ucG9zaXRpb25dO1xyXG4gICAgICBjb25zdCBjaGFyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgY2hhckVsLmNsYXNzTGlzdC5hZGQoJ2NoYXJhY3RlcicsIHBvc2l0aW9uLmNoYXJhY3Rlci50eXBlKTtcclxuXHJcbiAgICAgIGNvbnN0IGhlYWx0aEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIGhlYWx0aEVsLmNsYXNzTGlzdC5hZGQoJ2hlYWx0aC1sZXZlbCcpO1xyXG5cclxuICAgICAgY29uc3QgaGVhbHRoSW5kaWNhdG9yRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgaGVhbHRoSW5kaWNhdG9yRWwuY2xhc3NMaXN0LmFkZCgnaGVhbHRoLWxldmVsLWluZGljYXRvcicsIGBoZWFsdGgtbGV2ZWwtaW5kaWNhdG9yLSR7Y2FsY0hlYWx0aExldmVsKHBvc2l0aW9uLmNoYXJhY3Rlci5oZWFsdGgpfWApO1xyXG4gICAgICBoZWFsdGhJbmRpY2F0b3JFbC5zdHlsZS53aWR0aCA9IGAke3Bvc2l0aW9uLmNoYXJhY3Rlci5oZWFsdGh9JWA7XHJcbiAgICAgIGhlYWx0aEVsLmFwcGVuZENoaWxkKGhlYWx0aEluZGljYXRvckVsKTtcclxuXHJcbiAgICAgIGNoYXJFbC5hcHBlbmRDaGlsZChoZWFsdGhFbCk7XHJcbiAgICAgIGNlbGxFbC5hcHBlbmRDaGlsZChjaGFyRWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGxpc3RlbmVyIHRvIG1vdXNlIGVudGVyIGZvciBjZWxsXHJcbiAgICpcclxuICAgKiBAcGFyYW0gY2FsbGJhY2tcclxuICAgKi9cclxuICBhZGRDZWxsRW50ZXJMaXN0ZW5lcihjYWxsYmFjaykge1xyXG4gICAgdGhpcy5jZWxsRW50ZXJMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgbGlzdGVuZXIgdG8gbW91c2UgbGVhdmUgZm9yIGNlbGxcclxuICAgKlxyXG4gICAqIEBwYXJhbSBjYWxsYmFja1xyXG4gICAqL1xyXG4gIGFkZENlbGxMZWF2ZUxpc3RlbmVyKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLmNlbGxMZWF2ZUxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBsaXN0ZW5lciB0byBtb3VzZSBjbGljayBmb3IgY2VsbFxyXG4gICAqXHJcbiAgICogQHBhcmFtIGNhbGxiYWNrXHJcbiAgICovXHJcbiAgYWRkQ2VsbENsaWNrTGlzdGVuZXIoY2FsbGJhY2spIHtcclxuICAgIHRoaXMuY2VsbENsaWNrTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGxpc3RlbmVyIHRvIFwiTmV3IEdhbWVcIiBidXR0b24gY2xpY2tcclxuICAgKlxyXG4gICAqIEBwYXJhbSBjYWxsYmFja1xyXG4gICAqL1xyXG4gIGFkZE5ld0dhbWVMaXN0ZW5lcihjYWxsYmFjaykge1xyXG4gICAgdGhpcy5uZXdHYW1lTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGxpc3RlbmVyIHRvIFwiU2F2ZSBHYW1lXCIgYnV0dG9uIGNsaWNrXHJcbiAgICpcclxuICAgKiBAcGFyYW0gY2FsbGJhY2tcclxuICAgKi9cclxuICBhZGRTYXZlR2FtZUxpc3RlbmVyKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLnNhdmVHYW1lTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGxpc3RlbmVyIHRvIFwiTG9hZCBHYW1lXCIgYnV0dG9uIGNsaWNrXHJcbiAgICpcclxuICAgKiBAcGFyYW0gY2FsbGJhY2tcclxuICAgKi9cclxuICBhZGRMb2FkR2FtZUxpc3RlbmVyKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLmxvYWRHYW1lTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGxpc3RlbmVyIHRvIEVzYyBwcmVzcyB0aGUga2V5XHJcbiAgICpcclxuICAgKiBAcGFyYW0gY2FsbGJhY2tcclxuICAgKi9cclxuICBhZGRFc2NMaXN0ZW5lcihjYWxsYmFjaykge1xyXG4gICAgdGhpcy5lc2NMaXN0ZW5lciA9IGNhbGxiYWNrO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25Fc2MuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBvbkNlbGxFbnRlcihldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jZWxscy5pbmRleE9mKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgdGhpcy5jZWxsRW50ZXJMaXN0ZW5lcnMuZm9yRWFjaChvID0+IG8uY2FsbChudWxsLCBpbmRleCkpO1xyXG4gIH1cclxuXHJcbiAgb25DZWxsTGVhdmUoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuY2VsbHMuaW5kZXhPZihldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgIHRoaXMuY2VsbExlYXZlTGlzdGVuZXJzLmZvckVhY2gobyA9PiBvLmNhbGwobnVsbCwgaW5kZXgpKTtcclxuICB9XHJcblxyXG4gIG9uQ2VsbENsaWNrKGV2ZW50KSB7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuY2VsbHMuaW5kZXhPZihldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgIHRoaXMuY2VsbENsaWNrTGlzdGVuZXJzLmZvckVhY2gobyA9PiBvLmNhbGwobnVsbCwgaW5kZXgpKTtcclxuICB9XHJcblxyXG4gIG9uTmV3R2FtZUNsaWNrKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5uZXdHYW1lTGlzdGVuZXJzLmZvckVhY2gobyA9PiBvLmNhbGwobnVsbCkpO1xyXG4gIH1cclxuXHJcbiAgb25TYXZlR2FtZUNsaWNrKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5zYXZlR2FtZUxpc3RlbmVycy5mb3JFYWNoKG8gPT4gby5jYWxsKG51bGwpKTtcclxuICB9XHJcblxyXG4gIG9uTG9hZEdhbWVDbGljayhldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMubG9hZEdhbWVMaXN0ZW5lcnMuZm9yRWFjaChvID0+IG8uY2FsbChudWxsKSk7XHJcbiAgfVxyXG5cclxuICBvbkVzYyhldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmVzY0xpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhpcy5lc2NMaXN0ZW5lcigpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2hvd0Vycm9yKG1lc3NhZ2UpIHtcclxuICAgIGFsZXJ0KG1lc3NhZ2UpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNob3dNZXNzYWdlKG1lc3NhZ2UpIHtcclxuICAgIGFsZXJ0KG1lc3NhZ2UpO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0Q2VsbChpbmRleCwgY29sb3IgPSAneWVsbG93Jykge1xyXG4gICAgdGhpcy5kZXNlbGVjdENlbGwoaW5kZXgpO1xyXG4gICAgdGhpcy5jZWxsc1tpbmRleF0uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnLCBgc2VsZWN0ZWQtJHtjb2xvcn1gKTtcclxuICB9XHJcblxyXG4gIGRlc2VsZWN0Q2VsbChpbmRleCkge1xyXG4gICAgY29uc3QgY2VsbCA9IHRoaXMuY2VsbHNbaW5kZXhdO1xyXG4gICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKC4uLkFycmF5LmZyb20oY2VsbC5jbGFzc0xpc3QpLmZpbHRlcigobykgPT4gby5zdGFydHNXaXRoKCdzZWxlY3RlZCcpKSk7XHJcbiAgfVxyXG5cclxuICBkZXNlbGVjdEFsbCgpIHtcclxuICAgIGNvbnN0IHsgY2VsbHMgfSA9IHRoaXM7XHJcbiAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB0aGlzLmRlc2VsZWN0Q2VsbChjZWxscy5pbmRleE9mKGNlbGwpKSk7XHJcbiAgfVxyXG5cclxuICBzaG93Q2VsbFRvb2x0aXAobWVzc2FnZSwgaW5kZXgpIHtcclxuICAgIHRoaXMuY2VsbHNbaW5kZXhdLnRpdGxlID0gbWVzc2FnZTtcclxuICB9XHJcblxyXG4gIGhpZGVDZWxsVG9vbHRpcChpbmRleCkge1xyXG4gICAgdGhpcy5jZWxsc1tpbmRleF0udGl0bGUgPSAnJztcclxuICB9XHJcbiAgXHJcbiAgc2hvd0RhbWFnZShpbmRleCwgZGFtYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgY29uc3QgY2VsbCA9IHRoaXMuY2VsbHNbaW5kZXhdO1xyXG4gICAgICBjb25zdCBkYW1hZ2VFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgZGFtYWdlRWwudGV4dENvbnRlbnQgPSBkYW1hZ2U7XHJcbiAgICAgIGRhbWFnZUVsLmNsYXNzTGlzdC5hZGQoJ2RhbWFnZScpO1xyXG4gICAgICBjZWxsLmFwcGVuZENoaWxkKGRhbWFnZUVsKTtcclxuXHJcbiAgICAgIGRhbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsICgpID0+IHtcclxuICAgICAgICBjZWxsLnJlbW92ZUNoaWxkKGRhbWFnZUVsKTtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRDdXJzb3IoY3Vyc29yKSB7XHJcbiAgICB0aGlzLmJvYXJkRWwuc3R5bGUuY3Vyc29yID0gY3Vyc29yO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tCaW5kaW5nKCkge1xyXG4gICAgaWYgKHRoaXMuY29udGFpbmVyID09PSBudWxsKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignR2FtZVBsYXkgbm90IGJpbmQgdG8gRE9NJyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBAdG9kb1xyXG4gKiBAcGFyYW0gaW5kZXggLSDQuNC90LTQtdC60YEg0L/QvtC70Y9cclxuICogQHBhcmFtIGJvYXJkU2l6ZSAtINGA0LDQt9C80LXRgCDQutCy0LDQtNGA0LDRgtC90L7Qs9C+INC/0L7Qu9GPICjQsiDQtNC70LjQvdGDINC40LvQuCDRiNC40YDQuNC90YMpXHJcbiAqIEByZXR1cm5zINGB0YLRgNC+0LrQsCAtINGC0LjQvyDRj9GH0LXQudC60Lgg0L3QsCDQv9C+0LvQtTpcclxuICpcclxuICogdG9wLWxlZnRcclxuICogdG9wLXJpZ2h0XHJcbiAqIHRvcFxyXG4gKiBib3R0b20tbGVmdFxyXG4gKiBib3R0b20tcmlnaHRcclxuICogYm90dG9tXHJcbiAqIHJpZ2h0XHJcbiAqIGxlZnRcclxuICogY2VudGVyXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGpzXHJcbiAqIGNhbGNUaWxlVHlwZSgwLCA4KTsgLy8gJ3RvcC1sZWZ0J1xyXG4gKiBjYWxjVGlsZVR5cGUoMSwgOCk7IC8vICd0b3AnXHJcbiAqIGNhbGNUaWxlVHlwZSg2MywgOCk7IC8vICdib3R0b20tcmlnaHQnXHJcbiAqIGNhbGNUaWxlVHlwZSg3LCA3KTsgLy8gJ2xlZnQnXHJcbiAqIGBgYFxyXG4gKiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2FsY1RpbGVUeXBlKGluZGV4LCBib2FyZFNpemUpIHtcclxuICBpZiAoaW5kZXggPT09IDApIHJldHVybiAndG9wLWxlZnQnO1xyXG4gIGlmIChpbmRleCA+IDAgJiYgaW5kZXggPCBib2FyZFNpemUgLSAxKSByZXR1cm4gJ3RvcCc7XHJcbiAgaWYgKGluZGV4ID09PSBib2FyZFNpemUgLSAxKSByZXR1cm4gJ3RvcC1yaWdodCc7XHJcbiAgaWYgKGluZGV4ID09PSAoYm9hcmRTaXplICogYm9hcmRTaXplKSAtIDEpIHJldHVybiAnYm90dG9tLXJpZ2h0JztcclxuICBpZiAoaW5kZXggPiBib2FyZFNpemUgKiAoYm9hcmRTaXplIC0gMSkgJiYgaW5kZXggPCAoYm9hcmRTaXplICogYm9hcmRTaXplKSAtIDEpIHJldHVybiAnYm90dG9tJztcclxuICBpZiAoaW5kZXggJSBib2FyZFNpemUgPT09IGJvYXJkU2l6ZSAtIDEpIHJldHVybiAncmlnaHQnO1xyXG4gIGlmIChpbmRleCA9PT0gYm9hcmRTaXplICogKGJvYXJkU2l6ZSAtIDEpKSByZXR1cm4gJ2JvdHRvbS1sZWZ0JztcclxuICBpZiAoaW5kZXggJSBib2FyZFNpemUgPT09IDApIHJldHVybiAnbGVmdCc7XHJcblxyXG4gIHJldHVybiAnY2VudGVyJztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNIZWFsdGhMZXZlbChoZWFsdGgpIHtcclxuICBpZiAoaGVhbHRoIDwgMTUpIHtcclxuICAgIHJldHVybiAnY3JpdGljYWwnO1xyXG4gIH1cclxuXHJcbiAgaWYgKGhlYWx0aCA8IDUwKSB7XHJcbiAgICByZXR1cm4gJ25vcm1hbCc7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gJ2hpZ2gnO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0Q2hhcmFjdGVySW5mbyh7IGxldmVsLCBhdHRhY2ssIGRlZmVuY2UsIGhlYWx0aCB9KSB7XHJcbiAgcmV0dXJuIGDwn46WJHtsZXZlbH0g4pqUJHthdHRhY2t9IPCfm6Eke2RlZmVuY2V9IOKdpCR7aGVhbHRofWA7XHJcbn0iLCJjb25zdCB0aGVtZXMgPSB7XHJcbiAgcHJhaXJpZTogJ3ByYWlyaWUnLFxyXG4gIGRlc2VydDogJ2Rlc2VydCcsXHJcbiAgYXJjdGljOiAnYXJjdGljJyxcclxuICBtb3VudGFpbjogJ21vdW50YWluJyxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHRoZW1lczsiLCJjb25zdCBjdXJzb3JzID0ge1xyXG4gIGF1dG86ICdhdXRvJyxcclxuICBwb2ludGVyOiAncG9pbnRlcicsXHJcbiAgY3Jvc3NoYWlyOiAnY3Jvc3NoYWlyJyxcclxuICBub3RhbGxvd2VkOiAnbm90LWFsbG93ZWQnXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjdXJzb3JzO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lU3RhdGUge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5jdXJyZW50U3RlcCA9ICdwbGF5ZXInOyAvLyAncGxheWVyJyDQuNC70LggJ2VuZW15J1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGZyb20ob2JqZWN0KSB7XHJcbiAgICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KG9iamVjdCkpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBsZXZlbDogb2JqZWN0LmxldmVsLFxyXG4gICAgICAgIHBvc2l0aW9uczogb2JqZWN0LnBvc2l0aW9uc1RvRHJhdyxcclxuICAgICAgICB0aGVtZTogb2JqZWN0LnRoZW1lLFxyXG4gICAgICAgIHNjb3JlOiBvYmplY3Quc2NvcmUsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqINCa0LvQsNGB0YEsINC/0YDQtdC00YHRgtCw0LLQu9GP0Y7RidC40Lkg0L/QtdGA0YHQvtC90LDQttC10Lkg0LrQvtC80LDQvdC00YtcclxuICpcclxuICogQHRvZG8g0KHQsNC80L7RgdGC0L7Rj9GC0LXQu9GM0L3QviDQv9GA0L7QtNGD0LzQsNC50YLQtSDRhdGA0LDQvdC10L3QuNC1INC/0LXRgNGB0L7QvdCw0LbQtdC5INCyINC60LvQsNGB0YHQtVxyXG4gKiDQndCw0L/RgNC40LzQtdGAXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGpzXHJcbiAqIGNvbnN0IGNoYXJhY3RlcnMgPSBbbmV3IFN3b3Jkc21hbigyKSwgbmV3IEJvd21hbigxKV1cclxuICogY29uc3QgdGVhbSA9IG5ldyBUZWFtKGNoYXJhY3RlcnMpO1xyXG4gKlxyXG4gKiB0ZWFtLmNoYXJhY3RlcnMgLy8gW3N3b3Jkc21hbiwgYm93bWFuXVxyXG4gKiBgYGBcclxuICogKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVhbSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmNoYXJhY3RlcnMgPSBuZXcgU2V0KCk7XHJcbiAgfVxyXG5cclxuICBhZGQoY2hhcmFjdGVyKSB7XHJcbiAgICBpZiAoIWNoYXJhY3Rlcikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYXJhY3RlciBjYW5ub3QgYmUgbnVsbCBvciB1bmRlZmluZWQnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHRoaXMuY2hhcmFjdGVycy5oYXMoY2hhcmFjdGVyKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYXJhY3RlciBhbHJlYWR5IGV4aXN0cycpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0aGlzLmNoYXJhY3RlcnMuYWRkKGNoYXJhY3Rlcik7XHJcbiAgfVxyXG5cclxuICBhZGRBbGwoLi4uY2hhcmFjdGVycykge1xyXG4gICAgaWYgKGNoYXJhY3RlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY2hhcmFjdGVycyBwcm92aWRlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoYXJhY3RlcnMuZm9yRWFjaChjaGFyYWN0ZXIgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHRoaXMuYWRkKGNoYXJhY3Rlcik7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZS5tZXNzYWdlICE9PSAnQ2hhcmFjdGVyIGFscmVhZHkgZXhpc3RzJykge1xyXG4gICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdG9BcnJheSgpIHtcclxuICAgIHRoaXMuY2hhcmFjdGVycyA9IEFycmF5LmZyb20odGhpcy5jaGFyYWN0ZXJzKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFRlYW0gZnJvbSBcIi4vVGVhbS5qc1wiO1xyXG5cclxuLyoqXHJcbiAqINCk0L7RgNC80LjRgNGD0LXRgiDRjdC60LfQtdC80L/Qu9GP0YAg0L/QtdGA0YHQvtC90LDQttCwINC40Lcg0LzQsNGB0YHQuNCy0LAgYWxsb3dlZFR5cGVzINGB0L5cclxuICog0YHQu9GD0YfQsNC50L3Ri9C8INGD0YDQvtCy0L3QtdC8INC+0YIgMSDQtNC+IG1heExldmVsXHJcbiAqXHJcbiAqIEBwYXJhbSBhbGxvd2VkVHlwZXMg0LzQsNGB0YHQuNCyINC60LvQsNGB0YHQvtCyXHJcbiAqIEBwYXJhbSBtYXhMZXZlbCDQvNCw0LrRgdC40LzQsNC70YzQvdGL0Lkg0LLQvtC30LzQvtC20L3Ri9C5INGD0YDQvtCy0LXQvdGMINC/0LXRgNGB0L7QvdCw0LbQsFxyXG4gKiBAcmV0dXJucyDQs9C10L3QtdGA0LDRgtC+0YAsINC60L7RgtC+0YDRi9C5INC/0YDQuCDQutCw0LbQtNC+0Lwg0LLRi9C30L7QstC1XHJcbiAqINCy0L7Qt9Cy0YDQsNGJ0LDQtdGCINC90L7QstGL0Lkg0Y3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCDQv9C10YDRgdC+0L3QsNC20LBcclxuICpcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiogY2hhcmFjdGVyR2VuZXJhdG9yKGFsbG93ZWRUeXBlcywgbWF4TGV2ZWwpIHtcclxuICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgY29uc3QgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhbGxvd2VkVHlwZXMubGVuZ3RoKTtcclxuICAgIGNvbnN0IGxldmVsID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4TGV2ZWwpICsgMTtcclxuICAgIHlpZWxkIHsgY2hhcmFjdGVyOiBuZXcgYWxsb3dlZFR5cGVzW2luZGV4XShsZXZlbCksIGxldmVsIH07XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog0KTQvtGA0LzQuNGA0YPQtdGCINC80LDRgdGB0LjQsiDQv9C10YDRgdC+0L3QsNC20LXQuSDQvdCwINC+0YHQvdC+0LLQtSBjaGFyYWN0ZXJHZW5lcmF0b3JcclxuICogQHBhcmFtIGFsbG93ZWRUeXBlcyDQvNCw0YHRgdC40LIg0LrQu9Cw0YHRgdC+0LJcclxuICogQHBhcmFtIG1heExldmVsINC80LDQutGB0LjQvNCw0LvRjNC90YvQuSDQstC+0LfQvNC+0LbQvdGL0Lkg0YPRgNC+0LLQtdC90Ywg0L/QtdGA0YHQvtC90LDQttCwXHJcbiAqIEBwYXJhbSBjaGFyYWN0ZXJDb3VudCDQutC+0LvQuNGH0LXRgdGC0LLQviDQv9C10YDRgdC+0L3QsNC20LXQuSwg0LrQvtGC0L7RgNC+0LUg0L3Rg9C20L3QviDRgdGE0L7RgNC80LjRgNC+0LLQsNGC0YxcclxuICogQHJldHVybnMg0Y3QutC30LXQvNC/0LvRj9GAIFRlYW0sINGF0YDQsNC90Y/RidC40Lkg0Y3QutC30LXQvNC/0LvRj9GA0Ysg0L/QtdGA0YHQvtC90LDQttC10LkuINCa0L7Qu9C40YfQtdGB0YLQstC+INC/0LXRgNGB0L7QvdCw0LbQtdC5INCyINC60L7QvNCw0L3QtNC1IC0gY2hhcmFjdGVyQ291bnRcclxuICogKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVGVhbShhbGxvd2VkVHlwZXMsIG1heExldmVsLCBjaGFyYWN0ZXJDb3VudCkge1xyXG4gIGlmICghYWxsb3dlZFR5cGVzIHx8IGFsbG93ZWRUeXBlcy5sZW5ndGggPT09IDApIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignQWxsb3dlZCB0eXBlcyBhcnJheSBjYW5ub3QgYmUgZW1wdHknKTtcclxuICB9XHJcblxyXG4gIGlmIChjaGFyYWN0ZXJDb3VudCA8PSAwKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYXJhY3RlciBjb3VudCBtdXN0IGJlIHBvc2l0aXZlJyk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBnZW5lcmF0b3IgPSBjaGFyYWN0ZXJHZW5lcmF0b3IoYWxsb3dlZFR5cGVzLCBtYXhMZXZlbCk7XHJcbiAgY29uc3QgdGVhbSA9IG5ldyBUZWFtKCk7XHJcbiAgXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyYWN0ZXJDb3VudDsgaSArPSAxKSB7XHJcbiAgICBjb25zdCBuZXh0SGVybyA9IGdlbmVyYXRvci5uZXh0KCkudmFsdWU7XHJcbiAgICB0ZWFtLmFkZChuZXh0SGVyby5jaGFyYWN0ZXIpO1xyXG4gIH1cclxuXHJcbiAgdGVhbS50b0FycmF5KCk7XHJcbiAgcmV0dXJuIHRlYW0uY2hhcmFjdGVycztcclxufVxyXG4iLCIvKipcclxuICog0JHQsNC30L7QstGL0Lkg0LrQu9Cw0YHRgSwg0L7RgiDQutC+0YLQvtGA0L7Qs9C+INC90LDRgdC70LXQtNGD0Y7RgtGB0Y8g0LrQu9Cw0YHRgdGLINC/0LXRgNGB0L7QvdCw0LbQtdC5XHJcbiAqIEBwcm9wZXJ0eSBsZXZlbCAtINGD0YDQvtCy0LXQvdGMINC/0LXRgNGB0L7QvdCw0LbQsCwg0L7RgiAxINC00L4gNFxyXG4gKiBAcHJvcGVydHkgYXR0YWNrIC0g0L/QvtC60LDQt9Cw0YLQtdC70Ywg0LDRgtCw0LrQuFxyXG4gKiBAcHJvcGVydHkgZGVmZW5jZSAtINC/0L7QutCw0LfQsNGC0LXQu9GMINC30LDRidC40YLRi1xyXG4gKiBAcHJvcGVydHkgaGVhbHRoIC0g0LfQtNC+0YDQvtCy0YzQtSDQv9C10YDRgdC+0L3QsNC20LBcclxuICogQHByb3BlcnR5IHR5cGUgLSDRgdGC0YDQvtC60LAg0YEg0L7QtNC90LjQvCDQuNC3INC00L7Qv9GD0YHRgtC40LzRi9GFINC30L3QsNGH0LXQvdC40Lk6XHJcbiAqIHN3b3Jkc21hblxyXG4gKiBib3dtYW5cclxuICogbWFnaWNpYW5cclxuICogZGFlbW9uXHJcbiAqIHVuZGVhZFxyXG4gKiB2YW1waXJlXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGFyYWN0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKGxldmVsLCB0eXBlID0gJ2dlbmVyaWMnKSB7XHJcbiAgICB0aGlzLmxldmVsID0gbGV2ZWw7XHJcbiAgICB0aGlzLmF0dGFjayA9IDA7XHJcbiAgICB0aGlzLmRlZmVuY2UgPSAwO1xyXG4gICAgdGhpcy5oZWFsdGggPSA1MDtcclxuICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICB0aGlzLmRpc3RhbmNlID0gMTtcclxuICAgIHRoaXMuZGlzdGFuY2VBdHRhY2sgPSAxO1xyXG4gICAgaWYgKG5ldy50YXJnZXQubmFtZSA9PT0gJ0NoYXJhY3RlcicpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCfQlNCw0L3QvdGL0Lkg0LrQu9Cw0YHRgSDQvdC10LvRjNC30Y8g0LjRgdC/0L7Qu9GM0LfQvtCy0LDRgtGMINC00LvRjyDRgdC+0LfQtNCw0L3QuNGPINC/0LXRgNGB0L7QvdCw0LbQsCcpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ2hhcmFjdGVyIGZyb20gJy4vQ2hhcmFjdGVyLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvc2l0aW9uZWRDaGFyYWN0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKGNoYXJhY3Rlciwgc2lkZSwgcG9zaXRpb24pIHtcclxuICAgIGlmICghKGNoYXJhY3RlciBpbnN0YW5jZW9mIENoYXJhY3RlcikpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjaGFyYWN0ZXIgbXVzdCBiZSBpbnN0YW5jZSBvZiBDaGFyYWN0ZXIgb3IgaXRzIGNoaWxkcmVuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbnVtUG9zaXRpb24gPSBwYXJzZUludChwb3NpdGlvbiwgMTApO1xyXG5cclxuICAgIGlmIChOdW1iZXIuaXNOYU4obnVtUG9zaXRpb24pKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcigncG9zaXRpb24gbXVzdCBiZSBhIHZhbGlkIG51bWJlcicpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChudW1Qb3NpdGlvbiA8IDApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb3NpdGlvbiBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlcicpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2hhcmFjdGVyID0gY2hhcmFjdGVyO1xyXG4gICAgdGhpcy5zaWRlID0gc2lkZTtcclxuICAgIHRoaXMucG9zaXRpb24gPSBudW1Qb3NpdGlvbjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuLi9DaGFyYWN0ZXIuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm93bWFuIGV4dGVuZHMgQ2hhcmFjdGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGxldmVsLCB0eXBlID0gJ2Jvd21hbicpIHtcclxuICAgICAgICBzdXBlcihsZXZlbCwgdHlwZSk7XHJcbiAgICAgICAgdGhpcy5hdHRhY2sgPSAyNTtcclxuICAgICAgICB0aGlzLmRlZmVuY2UgPSAyNTtcclxuICAgICAgICB0aGlzLmRpc3RhbmNlID0gMjtcclxuICAgICAgICB0aGlzLmRpc3RhbmNlQXR0YWNrID0gMjtcclxuICAgIH1cclxufSIsImltcG9ydCBDaGFyYWN0ZXIgZnJvbSAnLi4vQ2hhcmFjdGVyLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN3b3Jkc21hbiBleHRlbmRzIENoYXJhY3RlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihsZXZlbCA9IDEsIHR5cGUgPSAnc3dvcmRzbWFuJykge1xyXG4gICAgICAgIHN1cGVyKGxldmVsLCB0eXBlKTtcclxuICAgICAgICB0aGlzLmF0dGFjayA9IDQwO1xyXG4gICAgICAgIHRoaXMuZGVmZW5jZSA9IDEwO1xyXG4gICAgICAgIHRoaXMuZGlzdGFuY2UgPSA0O1xyXG4gICAgICAgIHRoaXMuZGlzdGFuY2VBdHRhY2sgPSAxO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuLi9DaGFyYWN0ZXIuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFnaWNpYW4gZXh0ZW5kcyBDaGFyYWN0ZXIge1xyXG4gICAgY29uc3RydWN0b3IobGV2ZWwgPSAxLCB0eXBlID0gJ21hZ2ljaWFuJykge1xyXG4gICAgICAgIHN1cGVyKGxldmVsLCB0eXBlKTtcclxuICAgICAgICB0aGlzLmF0dGFjayA9IDEwO1xyXG4gICAgICAgIHRoaXMuZGVmZW5jZSA9IDQwO1xyXG4gICAgICAgIHRoaXMuZGlzdGFuY2UgPSAxO1xyXG4gICAgICAgIHRoaXMuZGlzdGFuY2VBdHRhY2sgPSA0O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuLi9DaGFyYWN0ZXIuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmFtcGlyZSBleHRlbmRzIENoYXJhY3RlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihsZXZlbCA9IDEsIHR5cGUgPSAndmFtcGlyZScpIHtcclxuICAgICAgICBzdXBlcihsZXZlbCwgdHlwZSk7XHJcbiAgICAgICAgdGhpcy5hdHRhY2sgPSAyNTtcclxuICAgICAgICB0aGlzLmRlZmVuY2UgPSAyNTtcclxuICAgICAgICB0aGlzLmRpc3RhbmNlID0gMjtcclxuICAgICAgICB0aGlzLmRpc3RhbmNlQXR0YWNrID0gMjtcclxuICAgIH1cclxufSIsImltcG9ydCBDaGFyYWN0ZXIgZnJvbSAnLi4vQ2hhcmFjdGVyLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVuZGVhZCBleHRlbmRzIENoYXJhY3RlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihsZXZlbCA9IDEsIHR5cGUgPSAndW5kZWFkJykge1xyXG4gICAgICAgIHN1cGVyKGxldmVsLCB0eXBlKTtcclxuICAgICAgICB0aGlzLmF0dGFjayA9IDQwO1xyXG4gICAgICAgIHRoaXMuZGVmZW5jZSA9IDEwO1xyXG4gICAgICAgIHRoaXMuZGlzdGFuY2UgPSA0O1xyXG4gICAgICAgIHRoaXMuZGlzdGFuY2VBdHRhY2sgPSAxO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuLi9DaGFyYWN0ZXIuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVhbW9uIGV4dGVuZHMgQ2hhcmFjdGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGxldmVsID0gMSwgdHlwZSA9ICdkYWVtb24nKSB7XHJcbiAgICAgICAgc3VwZXIobGV2ZWwsIHR5cGUpO1xyXG4gICAgICAgIHRoaXMuYXR0YWNrID0gMTA7XHJcbiAgICAgICAgdGhpcy5kZWZlbmNlID0gMTA7XHJcbiAgICAgICAgdGhpcy5kaXN0YW5jZSA9IDE7XHJcbiAgICAgICAgdGhpcy5kaXN0YW5jZUF0dGFjayA9IDQ7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgR2FtZVBsYXkgZnJvbSAnLi9HYW1lUGxheS5qcyc7XHJcbmltcG9ydCBHYW1lQ29udHJvbGxlciBmcm9tICcuL0dhbWVDb250cm9sbGVyLmpzJztcclxuaW1wb3J0IEdhbWVTdGF0ZVNlcnZpY2UgZnJvbSAnLi9HYW1lU3RhdGVTZXJ2aWNlLmpzJztcclxuXHJcbmNvbnN0IGdhbWVQbGF5ID0gbmV3IEdhbWVQbGF5KCk7XHJcbmdhbWVQbGF5LmJpbmRUb0RPTShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2FtZS1jb250YWluZXInKSk7XHJcblxyXG5jb25zdCBzdGF0ZVNlcnZpY2UgPSBuZXcgR2FtZVN0YXRlU2VydmljZShsb2NhbFN0b3JhZ2UpO1xyXG5cclxuY29uc3QgZ2FtZUN0cmwgPSBuZXcgR2FtZUNvbnRyb2xsZXIoZ2FtZVBsYXksIHN0YXRlU2VydmljZSk7XHJcbmdhbWVDdHJsLmluaXQoKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVN0YXRlU2VydmljZSB7XHJcbiAgY29uc3RydWN0b3Ioc3RvcmFnZSkge1xyXG4gICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTtcclxuICB9XHJcblxyXG4gIHNhdmUoc3RhdGUpIHtcclxuICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKCdzdGF0ZScsIEpTT04uc3RyaW5naWZ5KHN0YXRlKSk7XHJcbiAgfVxyXG5cclxuICBsb2FkKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKCdzdGF0ZScpO1xyXG5cclxuICAgIGlmICghZGF0YSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RhdGUnKTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RhdGUnKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHRoZW1lcyBmcm9tIFwiLi90aGVtZXMuanNcIjtcclxuaW1wb3J0IGN1cnNvcnMgZnJvbSAnLi9jdXJzb3JzLmpzJztcclxuaW1wb3J0IEdhbWVQbGF5IGZyb20gJy4vR2FtZVBsYXkuanMnO1xyXG5pbXBvcnQgR2FtZVN0YXRlIGZyb20gJy4vR2FtZVN0YXRlLmpzJztcclxuaW1wb3J0IHsgZ2VuZXJhdGVUZWFtIH0gZnJvbSBcIi4vZ2VuZXJhdG9ycy5qc1wiO1xyXG5pbXBvcnQgUG9zaXRpb25lZENoYXJhY3RlciBmcm9tIFwiLi9Qb3NpdGlvbmVkQ2hhcmFjdGVyLmpzXCI7XHJcbmltcG9ydCB7IGZvcm1hdENoYXJhY3RlckluZm8gfSBmcm9tICcuL3V0aWxzLmpzJztcclxuXHJcbmltcG9ydCBCb3dtYW4gZnJvbSAnLi9jaGFyYWN0ZXJzL0Jvd21hbi5qcyc7XHJcbmltcG9ydCBTd29yZHNtYW4gZnJvbSAnLi9jaGFyYWN0ZXJzL1N3b3Jkc21hbi5qcyc7XHJcbmltcG9ydCBNYWdpY2lhbiBmcm9tICcuL2NoYXJhY3RlcnMvTWFnaWNpYW4uanMnO1xyXG5pbXBvcnQgVmFtcGlyZSBmcm9tICcuL2NoYXJhY3RlcnMvVmFtcGlyZS5qcyc7XHJcbmltcG9ydCBVbmRlYWQgZnJvbSAnLi9jaGFyYWN0ZXJzL1VuZGVhZC5qcyc7XHJcbmltcG9ydCBEYWVtb24gZnJvbSAnLi9jaGFyYWN0ZXJzL0RhZW1vbi5qcyc7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbnRyb2xsZXIge1xyXG4gIGNvbnN0cnVjdG9yKGdhbWVQbGF5LCBzdGF0ZVNlcnZpY2UpIHtcclxuICAgIGlmICghZ2FtZVBsYXkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdnYW1lUGxheSBpbnN0YW5jZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5nYW1lUGxheSA9IGdhbWVQbGF5O1xyXG4gICAgdGhpcy5zdGF0ZVNlcnZpY2UgPSBzdGF0ZVNlcnZpY2U7XHJcbiAgICB0aGlzLnNpZGVzID0ge1xyXG4gICAgICBwbGF5ZXI6IHtcclxuICAgICAgICBuYW1lOiAncGxheWVyJyxcclxuICAgICAgICBmaXJzdDogMCxcclxuICAgICAgICBzZWNvbmQ6IDEsXHJcbiAgICAgICAgY2hhcmFjdGVyczogW1N3b3Jkc21hbiwgQm93bWFuLCBNYWdpY2lhbl0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGVuZW15OiB7XHJcbiAgICAgICAgbmFtZTogJ2VuZW15JyxcclxuICAgICAgICBmaXJzdDogdGhpcy5nYW1lUGxheS5ib2FyZFNpemUgLSAxLFxyXG4gICAgICAgIHNlY29uZDogdGhpcy5nYW1lUGxheS5ib2FyZFNpemUgLSAyLFxyXG4gICAgICAgIGNoYXJhY3RlcnM6IFtVbmRlYWQsIFZhbXBpcmUsIERhZW1vbl0sXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgdGhpcy5sZXZlbCA9IDE7XHJcbiAgICB0aGlzLnNjb3JlID0gMDtcclxuICAgIHRoaXMuYXR0YWNrID0gW107XHJcbiAgICB0aGlzLnN0YXR1c2VzID0ge1xyXG4gICAgICBmcmVlc3BhY2U6ICdmcmVlIHNwYWNlJyxcclxuICAgICAgZW5lbXk6ICdlbmVteScsXHJcbiAgICAgIGFsbGllZDogJ2FsbGllZCcsXHJcbiAgICAgIG5vdGFsbG93ZWQ6ICdub3RhbGxvd2VkJyxcclxuICAgIH07XHJcbiAgICB0aGlzLm1vdmVtZW50cyA9IFtdO1xyXG4gICAgdGhpcy5zZWxlY3RlZCA9IG51bGw7XHJcbiAgICB0aGlzLmN1cnJlbnRTdGF0dXMgPSBudWxsO1xyXG4gICAgdGhpcy5wb3NpdGlvbnNUb0RyYXcgPSBbXTtcclxuICAgIHRoaXMuaXNBY3Rpb25JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICB0aGlzLmFyZWEgPSB0aGlzLmdldFJvd0FycmF5KCk7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuICAgICAgY29uc3QgbG9hZGVkID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdyZWxvYWQnKSk7XHJcblxyXG4gICAgICBpZiAobG9hZGVkKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkU3RhdGUobG9hZGVkKTsgLy8g0J3QsNC/0LjRgdCw0YLRjCDQvNC10YLQvtC0IGxvYWRTdGF0ZVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudGhlbWUgPSB0aGVtZXMucHJhaXJpZTtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LmRyYXdVaSh0aGlzLnRoZW1lKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5tb3VzZUV2ZW50cygpO1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmxvYWQnLCAoKSA9PiB7XHJcbiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3JlbG9hZCcsIEpTT04uc3RyaW5naWZ5KEdhbWVTdGF0ZS5mcm9tKHRoaXMpKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG1vdXNlRXZlbnRzKCkge1xyXG4gICAgdGhpcy5nYW1lUGxheS5hZGRDZWxsQ2xpY2tMaXN0ZW5lcih0aGlzLm9uQ2VsbENsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5nYW1lUGxheS5hZGRDZWxsRW50ZXJMaXN0ZW5lcih0aGlzLm9uQ2VsbEVudGVyLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5nYW1lUGxheS5hZGRDZWxsTGVhdmVMaXN0ZW5lcih0aGlzLm9uQ2VsbExlYXZlLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5nYW1lUGxheS5hZGRFc2NMaXN0ZW5lcih0aGlzLm9uRXNjLmJpbmQodGhpcykpO1xyXG5cclxuICAgIHRoaXMuZ2FtZVBsYXkuYWRkTmV3R2FtZUxpc3RlbmVyKHRoaXMubmV3R2FtZS5iaW5kKHRoaXMsIHRoaXMubGV2ZWwsIHRoaXMudGhlbWUpKTtcclxuICAgIHRoaXMuZ2FtZVBsYXkuYWRkU2F2ZUdhbWVMaXN0ZW5lcih0aGlzLnNhdmVHYW1lLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5nYW1lUGxheS5hZGRMb2FkR2FtZUxpc3RlbmVyKHRoaXMubG9hZEdhbWUuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBwb3NpdGlvbnMoKSB7XHJcbiAgICBjb25zdCBwb3NpdGlvbnMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5nYW1lUGxheS5ib2FyZFNpemUgKiogMjsgaSArPSAxKSB7XHJcbiAgICAgICAgcG9zaXRpb25zLnB1c2goaSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFycmF5OiBwb3NpdGlvbnMsXHJcbiAgICAgICAgcm93OiB0aGlzLmdhbWVQbGF5LmJvYXJkU2l6ZSxcclxuICAgICAgICBsZW5ndGg6IHBvc2l0aW9ucy5sZW5ndGhcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzaWRlUG9zaXRpb25zKHNpZGUpIHtcclxuICAgICAgY29uc3QgZmllbGQgPSB0aGlzLnBvc2l0aW9ucygpO1xyXG4gICAgICByZXR1cm4gZmllbGQuYXJyYXkuZmlsdGVyKChpdGVtKSA9PiAoXHJcbiAgICAgICAgICAoaXRlbSAlIGZpZWxkLnJvdyA9PT0gc2lkZS5maXJzdCkgfHwgXHJcbiAgICAgICAgICAoaXRlbSAlIGZpZWxkLnJvdyA9PT0gc2lkZS5zZWNvbmQpXHJcbiAgICAgICkpLm1hcCgoaXRlbSkgPT4gaXRlbSk7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbihzaWRlKSB7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2lkZSkgfHwgc2lkZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdzaWRlIG11c3QgYmUgYSBub24tZW1wdHkgYXJyYXknKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzaWRlLmxlbmd0aCk7XHJcbiAgICBjb25zdCBjZWxsID0gc2lkZVtpbmRleF07XHJcbiAgICBcclxuICAgIGlmICh0eXBlb2YgY2VsbCAhPT0gJ251bWJlcicpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNlbGwgcG9zaXRpb24nKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgc2lkZS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgcmV0dXJuIGNlbGw7XHJcbiAgfVxyXG5cclxuICBuZXdHYW1lKGxldmVsID0gMSwgdGhlbWUgPSB0aGVtZXMucHJhaXJpZSkge1xyXG4gICAgdGhpcy5sZXZlbCA9IGxldmVsO1xyXG4gICAgdGhpcy5nYW1lUGxheS5kZXNlbGVjdEFsbCgpO1xyXG4gICAgdGhpcy5zZWxlY3RlZCA9IG51bGw7XHJcbiAgICB0aGlzLnRoZW1lID0gdGhlbWU7XHJcbiAgICB0aGlzLmdhbWVQbGF5LmRyYXdVaSh0aGlzLnRoZW1lKTtcclxuXHJcbiAgICBpZiAobGV2ZWwgPT09IDEpIHtcclxuICAgICAgdGhpcy5wb3NpdGlvbnNUb0RyYXcgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwbGF5ZXIgPSBBcnJheS5mcm9tKHRoaXMuc2lkZVBvc2l0aW9ucyh0aGlzLnNpZGVzLnBsYXllcikpO1xyXG4gICAgY29uc3QgZW5lbXkgPSBBcnJheS5mcm9tKHRoaXMuc2lkZVBvc2l0aW9ucyh0aGlzLnNpZGVzLmVuZW15KSk7XHJcblxyXG4gICAgaWYgKCF0aGlzLnBvc2l0aW9uc1RvRHJhdy5sZW5ndGgpIHtcclxuICAgICAgY29uc3QgcGxheWVyVGVhbSA9IGdlbmVyYXRlVGVhbShbU3dvcmRzbWFuLCBCb3dtYW5dLCBsZXZlbCwgMik7XHJcbiAgICAgIGNvbnN0IGVuZW15VGVhbSA9IGdlbmVyYXRlVGVhbSh0aGlzLnNpZGVzLmVuZW15LmNoYXJhY3RlcnMsIGxldmVsLCAyKTtcclxuXHJcbiAgICAgIHRoaXMucG9zaXRpb25zVG9EcmF3ID0gW1xyXG4gICAgICAgIC4uLnBsYXllclRlYW0ubWFwKGl0ZW0gPT4gbmV3IFBvc2l0aW9uZWRDaGFyYWN0ZXIoXHJcbiAgICAgICAgICBpdGVtLCBcclxuICAgICAgICAgIHRoaXMuc2lkZXMucGxheWVyLm5hbWUsIFxyXG4gICAgICAgICAgdGhpcy5nZXRQb3NpdGlvbihwbGF5ZXIpXHJcbiAgICAgICAgKSksXHJcbiAgICAgICAgLi4uZW5lbXlUZWFtLm1hcChpdGVtID0+IG5ldyBQb3NpdGlvbmVkQ2hhcmFjdGVyKFxyXG4gICAgICAgICAgaXRlbSwgXHJcbiAgICAgICAgICB0aGlzLnNpZGVzLmVuZW15Lm5hbWUsIFxyXG4gICAgICAgICAgdGhpcy5nZXRQb3NpdGlvbihlbmVteSlcclxuICAgICAgICApKVxyXG4gICAgICBdLmZsYXQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucG9zaXRpb25zVG9EcmF3LmZvckVhY2goKGhlcm8pID0+IHtcclxuICAgICAgICBoZXJvLnBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbihwbGF5ZXIpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHBsYXllckZpbHRlcmVkID0gQXJyYXkuZnJvbSh0aGlzLnNpZGVQb3NpdGlvbnModGhpcy5zaWRlcy5wbGF5ZXIpKVxyXG4gICAgICAgIC5maWx0ZXIoKGNlbGwpID0+ICF0aGlzLnBvc2l0aW9uc1RvRHJhdy5maW5kKChoZXJvKSA9PiBoZXJvLnBvc2l0aW9uID09PSBjZWxsKSk7XHJcbiAgICAgIGNvbnN0IHN1cnZpdm9yc1BsYXllciA9IHRoaXMucG9zaXRpb25zVG9EcmF3Lmxlbmd0aDtcclxuICAgICAgbGV0IHBsYXllclRlYW07XHJcblxyXG4gICAgICBpZiAobGV2ZWwgPT09IDIpIHtcclxuICAgICAgICBwbGF5ZXJUZWFtID0gZ2VuZXJhdGVUZWFtKHRoaXMuc2lkZXMucGxheWVyLmNoYXJhY3RlcnMsIGxldmVsIC0gMSwgMSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChsZXZlbCA9PT0gMyB8fCBsZXZlbCA9PT0gNCkge1xyXG4gICAgICAgIHBsYXllclRlYW0gPSBnZW5lcmF0ZVRlYW0odGhpcy5zaWRlcy5wbGF5ZXIuY2hhcmFjdGVycywgbGV2ZWwgLSAxLCAyKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZW5lbXlUZWFtID0gZ2VuZXJhdGVUZWFtKFxyXG4gICAgICAgIHRoaXMuc2lkZXMuZW5lbXkuY2hhcmFjdGVycyxcclxuICAgICAgICBsZXZlbCwgXHJcbiAgICAgICAgcGxheWVyVGVhbS5sZW5ndGggKyBzdXJ2aXZvcnNQbGF5ZXJcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHRoaXMucG9zaXRpb25zVG9EcmF3LnB1c2goXHJcbiAgICAgICAgcGxheWVyVGVhbS5tYXAoaXRlbSA9PiBuZXcgUG9zaXRpb25lZENoYXJhY3RlcihcclxuICAgICAgICAgIGl0ZW0sXHJcbiAgICAgICAgICB0aGlzLnNpZGVzLnBsYXllci5uYW1lLFxyXG4gICAgICAgICAgdGhpcy5nZXRQb3NpdGlvbihwbGF5ZXJGaWx0ZXJlZClcclxuICAgICAgICApKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnBvc2l0aW9uc1RvRHJhdy5wdXNoKFxyXG4gICAgICAgIGVuZW15VGVhbS5tYXAoaXRlbSA9PiBuZXcgUG9zaXRpb25lZENoYXJhY3RlcihcclxuICAgICAgICAgIGl0ZW0sXHJcbiAgICAgICAgICB0aGlzLnNpZGVzLmVuZW15Lm5hbWUsXHJcbiAgICAgICAgICB0aGlzLmdldFBvc2l0aW9uKGVuZW15KVxyXG4gICAgICAgICkpXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMucG9zaXRpb25zVG9EcmF3ID0gdGhpcy5wb3NpdGlvbnNUb0RyYXcuZmxhdCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5nYW1lUGxheS5yZWRyYXdQb3NpdGlvbnModGhpcy5wb3NpdGlvbnNUb0RyYXcpO1xyXG4gIH1cclxuXHJcbiAgc2F2ZUdhbWUoKSB7XHJcbiAgICBpZiAoIXRoaXMucG9zaXRpb25zVG9EcmF3Lmxlbmd0aCkge1xyXG4gICAgICBHYW1lUGxheS5zaG93RXJyb3IoJ05vIHNhdmVkIGdhbWVzJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHN0YXRlID0gR2FtZVN0YXRlLmZyb20odGhpcyk7XHJcbiAgICAgIHRoaXMuc3RhdGVTZXJ2aWNlLnNhdmUoc3RhdGUpO1xyXG4gICAgICBHYW1lUGxheS5zaG93TWVzc2FnZSgnR2FtZSBzYXZlZCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbG9hZEdhbWUoKSB7XHJcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGVTZXJ2aWNlLmxvYWQoKTtcclxuXHJcbiAgICBpZiAoIXN0YXRlKSB7XHJcbiAgICAgIEdhbWVQbGF5LnNob3dFcnJvcignTm8gc2F2ZWQgZ2FtZXMnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5sb2FkU3RhdGUoc3RhdGUpO1xyXG4gICAgR2FtZVBsYXkuc2hvd01lc3NhZ2UoJ0dhbWUgbG9hZGVkJyk7XHJcbiAgfVxyXG5cclxuICBsb2FkU3RhdGUoc3RhdGUpIHtcclxuICAgIGlmICghc3RhdGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZ2FtZVBsYXkuZGVzZWxlY3RBbGwoKTtcclxuICAgIHRoaXMuc2VsZWN0ZWQgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0IHsgbGV2ZWwsIHBvc2l0aW9ucywgdGhlbWUsIHNjb3JlIH0gPSBzdGF0ZTtcclxuXHJcbiAgICB0aGlzLmxldmVsID0gbGV2ZWwgfHwgMTtcclxuICAgIHRoaXMucG9zaXRpb25zVG9EcmF3ID0gcG9zaXRpb25zO1xyXG4gICAgdGhpcy50aGVtZSA9IHRoZW1lIHx8IHRoZW1lcy5wcmFpcmllO1xyXG4gICAgdGhpcy5zY29yZSA9IHNjb3JlIHx8IDA7XHJcblxyXG4gICAgdGhpcy5nYW1lUGxheS5kcmF3VWkodGhpcy50aGVtZSk7XHJcblxyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5wb3NpdGlvbnNUb0RyYXcpICYmIHRoaXMucG9zaXRpb25zVG9EcmF3Lmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5nYW1lUGxheS5yZWRyYXdQb3NpdGlvbnModGhpcy5wb3NpdGlvbnNUb0RyYXcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Fc2MoKSB7XHJcbiAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICB0aGlzLnNjb3JlID0gMDtcclxuICAgIHRoaXMuZ2FtZVBsYXkuZHJhd1VpKHRoaXMudGhlbWUpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLmxldmVsID0gMTtcclxuICAgIHRoaXMucG9zaXRpb25zVG9EcmF3ID0gW107XHJcbiAgICB0aGlzLnNlbGVjdGVkID0gbnVsbDtcclxuICAgIHRoaXMudGhlbWUgPSB0aGVtZXMucHJhaXJpZTtcclxuICB9XHJcblxyXG4gIGxldmVsVXAoKSB7XHJcbiAgICB0aGlzLmxldmVsICs9IDE7XHJcbiAgICB0aGlzLnBvc2l0aW9uc1RvRHJhdy5mb3JFYWNoKChoZXJvKSA9PiB7XHJcbiAgICAgIGhlcm8uY2hhcmFjdGVyLmxldmVsID0gdGhpcy5sZXZlbDtcclxuICAgICAgaGVyby5jaGFyYWN0ZXIuYXR0YWNrID0gTWF0aC5jZWlsKE1hdGgubWF4KFxyXG4gICAgICAgIGhlcm8uY2hhcmFjdGVyLmF0dGFjaywgaGVyby5jaGFyYWN0ZXIuYXR0YWNrICogKDEuOCAtIChoZXJvLmNoYXJhY3Rlci5oZWFsdGggPT09IDEgPyA4MCA6IGhlcm8uY2hhcmFjdGVyLmhlYWx0aCkgLyAxMDApKVxyXG4gICAgICApO1xyXG4gICAgICBoZXJvLmNoYXJhY3Rlci5kZWZlbmNlID0gTWF0aC5jZWlsKE1hdGgubWF4KFxyXG4gICAgICAgIGhlcm8uY2hhcmFjdGVyLmRlZmVuY2UsIGhlcm8uY2hhcmFjdGVyLmRlZmVuY2UgKiAoMS44IC0gKGhlcm8uY2hhcmFjdGVyLmhlYWx0aCA9PT0gMSA/IDgwIDogaGVyby5jaGFyYWN0ZXIuaGVhbHRoKSAvIDEwMCkpXHJcbiAgICAgICk7XHJcbiAgICAgIGhlcm8uY2hhcmFjdGVyLmhlYWx0aCA9IE1hdGguY2VpbChcclxuICAgICAgICBoZXJvLmNoYXJhY3Rlci5oZWFsdGggKyA4MCA+IDEwMCA/IDEwMCA6IGhlcm8uY2hhcmFjdGVyLmhlYWx0aCArIDgwXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzd2l0Y2godGhpcy5sZXZlbCkge1xyXG4gICAgICBjYXNlIDI6XHJcbiAgICAgICAgdGhpcy5nYW1lUGxheS5kcmF3VWkodGhlbWVzLmRlc2VydCk7XHJcbiAgICAgICAgdGhpcy50aGVtZSA9IHRoZW1lcy5kZXNlcnQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgMzpcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LmRyYXdVaSh0aGVtZXMuYXJjdGljKTtcclxuICAgICAgICB0aGlzLnRoZW1lID0gdGhlbWVzLmFyY3RpYztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA0OlxyXG4gICAgICAgIHRoaXMuZ2FtZVBsYXkuZHJhd1VpKHRoZW1lcy5tb3VudGFpbik7XHJcbiAgICAgICAgdGhpcy50aGVtZSA9IHRoZW1lcy5tb3VudGFpbjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LmRyYXdVaSh0aGVtZXMucHJhaXJpZSk7XHJcbiAgICAgICAgdGhpcy50aGVtZSA9IHRoZW1lcy5wcmFpcmllO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmxldmVsO1xyXG4gIH1cclxuXHJcbiAgZ2V0Um93QXJyYXkoKSB7XHJcbiAgICBjb25zdCBhcmVhID0gW107XHJcbiAgICBsZXQgcm93QXJyID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplICoqIDI7IGkgKz0gMSkge1xyXG4gICAgICByb3dBcnIucHVzaChpKTtcclxuICAgICAgaWYgKHJvd0Fyci5sZW5ndGggPT09IHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplKSB7XHJcbiAgICAgICAgYXJlYS5wdXNoKHJvd0Fycik7XHJcbiAgICAgICAgcm93QXJyID0gW107XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcmVhO1xyXG4gIH1cclxuXHJcbiAgZ2V0QXJlYU1vdmUoY3VycmVudFBvc2l0aW9uLCBkaXN0YW5jZSkge1xyXG4gICAgaWYgKCFjdXJyZW50UG9zaXRpb24gfHwgdHlwZW9mIGRpc3RhbmNlID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYm9hcmRTaXplID0gdGhpcy5nYW1lUGxheS5ib2FyZFNpemU7XHJcbiAgICBjb25zdCByb3cgPSBjdXJyZW50UG9zaXRpb24ucG9zaXRpb24gJSBib2FyZFNpemU7XHJcbiAgICBjb25zdCBjb2x1bW4gPSBNYXRoLmZsb29yKGN1cnJlbnRQb3NpdGlvbi5wb3NpdGlvbiAvIGJvYXJkU2l6ZSk7XHJcbiAgICBjb25zdCBhcmVhTW92ZSA9IFtdO1xyXG5cclxuICAgIGNvbnN0IG1vdmVEaXN0YW5jZSA9IE51bWJlcihkaXN0YW5jZSkgfHwgMTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBtb3ZlRGlzdGFuY2U7IGkgKz0gMSkge1xyXG4gICAgICAvLyDQktC/0YDQsNCy0L5cclxuICAgICAgbGV0IHJpZ2h0T3JMZWZ0ID0gcm93ICsgaTtcclxuICAgICAgaWYgKHJpZ2h0T3JMZWZ0IDwgYm9hcmRTaXplICYmIHRoaXMuYXJlYVtjb2x1bW5dKSB7XHJcbiAgICAgICAgYXJlYU1vdmUucHVzaCh0aGlzLmFyZWFbY29sdW1uXVtyaWdodE9yTGVmdF0pO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIC8vINCS0L3QuNC3XHJcbiAgICAgIGxldCB1cE9yRG93biA9IGNvbHVtbiArIGk7XHJcbiAgICAgIGlmICh1cE9yRG93biA8IGJvYXJkU2l6ZSAmJiB0aGlzLmFyZWFbdXBPckRvd25dKSB7XHJcbiAgICAgICAgYXJlYU1vdmUucHVzaCh0aGlzLmFyZWFbdXBPckRvd25dW3Jvd10pO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIC8vINCS0L/RgNCw0LLQviDQuCDQstC90LjQtyDQv9C+INC00LjQsNCz0L7QvdCw0LvQuFxyXG4gICAgICBpZiAoKHVwT3JEb3duIDwgYm9hcmRTaXplKSAmJiAocmlnaHRPckxlZnQgPCBib2FyZFNpemUpICYmIHRoaXMuYXJlYVt1cE9yRG93bl0pIHtcclxuICAgICAgICBhcmVhTW92ZS5wdXNoKHRoaXMuYXJlYVt1cE9yRG93bl1bcmlnaHRPckxlZnRdKTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICAvLyDQktC70LXQstC+XHJcbiAgICAgIHJpZ2h0T3JMZWZ0ID0gcm93IC0gaTtcclxuICAgICAgaWYgKHJpZ2h0T3JMZWZ0ID49IDAgJiYgdGhpcy5hcmVhW2NvbHVtbl0pIHtcclxuICAgICAgICBhcmVhTW92ZS5wdXNoKHRoaXMuYXJlYVtjb2x1bW5dW3JpZ2h0T3JMZWZ0XSk7XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgLy8g0JLQu9C10LLQviDQuCDQstC90LjQtyDQv9C+INC00LjQsNCz0L7QvdCw0LvQuFxyXG4gICAgICBpZiAoKHJpZ2h0T3JMZWZ0ID49IDApICYmICh1cE9yRG93biA8IGJvYXJkU2l6ZSkgJiYgdGhpcy5hcmVhW3VwT3JEb3duXSkge1xyXG4gICAgICAgIGFyZWFNb3ZlLnB1c2godGhpcy5hcmVhW3VwT3JEb3duXVtyaWdodE9yTGVmdF0pO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIC8vINCS0LLQtdGA0YVcclxuICAgICAgdXBPckRvd24gPSBjb2x1bW4gLSBpO1xyXG4gICAgICBpZiAodXBPckRvd24gPj0gMCAmJiB0aGlzLmFyZWFbdXBPckRvd25dKSB7XHJcbiAgICAgICAgYXJlYU1vdmUucHVzaCh0aGlzLmFyZWFbdXBPckRvd25dW3Jvd10pO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIC8vINCS0LvQtdCy0L4g0Lgg0LLQstC10YDRhSDQv9C+INC00LjQsNCz0L7QvdCw0LvQuFxyXG4gICAgICBpZiAoKHVwT3JEb3duID49IDApICYmIChyaWdodE9yTGVmdCA+PSAwKSAmJiB0aGlzLmFyZWFbdXBPckRvd25dKSB7XHJcbiAgICAgICAgYXJlYU1vdmUucHVzaCh0aGlzLmFyZWFbdXBPckRvd25dW3JpZ2h0T3JMZWZ0XSk7XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgcmlnaHRPckxlZnQgPSByb3cgKyBpO1xyXG4gICAgICAvLyDQktC/0YDQsNCy0L4g0Lgg0LLQstC10YDRhSDQv9C+INC00LjQsNCz0L7QvdCw0LvQuFxyXG4gICAgICBpZiAoKHJpZ2h0T3JMZWZ0IDwgYm9hcmRTaXplKSAmJiAodXBPckRvd24gPj0gMCkgJiYgdGhpcy5hcmVhW3VwT3JEb3duXSkge1xyXG4gICAgICAgIGFyZWFNb3ZlLnB1c2godGhpcy5hcmVhW3VwT3JEb3duXVtyaWdodE9yTGVmdF0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vINCk0LjQu9GM0YLRgNGD0LXQvCDQvdC10LLQsNC70LjQtNC90YvQtSDQt9C90LDRh9C10L3QuNGPXHJcbiAgICByZXR1cm4gYXJlYU1vdmUuZmlsdGVyKHBvcyA9PiBwb3MgIT09IHVuZGVmaW5lZCAmJiBwb3MgPj0gMCk7XHJcbiAgfVxyXG5cclxuICBnZXRBcmVhQXR0YWNrKGN1cnJlbnRQb3NpdGlvbiwgZGlzdGFuY2VBdHRhY2spIHtcclxuICAgIGNvbnN0IGFyZWFBdHRhY2sgPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gY3VycmVudFBvc2l0aW9uLnBvc2l0aW9uIC0gdGhpcy5nYW1lUGxheS5ib2FyZFNpemUgKiBkaXN0YW5jZUF0dGFjaztcclxuICAgICAgICAgICAgaSA8PSBjdXJyZW50UG9zaXRpb24ucG9zaXRpb24gKyB0aGlzLmdhbWVQbGF5LmJvYXJkU2l6ZSAqIGRpc3RhbmNlQXR0YWNrO1xyXG4gICAgICAgICAgICBpICs9IHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplXHJcbiAgICApIHtcclxuICAgICAgaWYgKChpID49IDApICYmIChpIDwgdGhpcy5nYW1lUGxheS5ib2FyZFNpemUgKiogMikpIHtcclxuICAgICAgICBmb3IgKGxldCBqID0gaSAtIGRpc3RhbmNlQXR0YWNrOyBqIDw9IGkgKyBkaXN0YW5jZUF0dGFjazsgaiArPSAxKSB7XHJcbiAgICAgICAgICBpZiAoKGogPj0gaSAtIChpICUgdGhpcy5nYW1lUGxheS5ib2FyZFNpemUpKSBcclxuICAgICAgICAgICAgICAmJiAoaiA8IGkgKyAodGhpcy5nYW1lUGxheS5ib2FyZFNpemUgLSAoaSAlIHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplKSkpXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgYXJlYUF0dGFjay5wdXNoKGopO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXJlYUF0dGFjay5zcGxpY2UoYXJlYUF0dGFjay5pbmRleE9mKGN1cnJlbnRQb3NpdGlvbi5wb3NpdGlvbiksIDEpO1xyXG4gICAgcmV0dXJuIGFyZWFBdHRhY2s7XHJcbiAgfVxyXG5cclxuICBtb3ZlRGVmZW5kaW5nKGRlZmVuZGluZywgYXR0YWNrZXIsIGVuZW1pZXMpIHtcclxuICAgIGNvbnN0IG1vdmVtZW50cyA9IHRoaXMuZ2V0QXJlYU1vdmUoZGVmZW5kaW5nLCBkZWZlbmRpbmcuY2hhcmFjdGVyLmRpc3RhbmNlKVxyXG4gICAgICAuZmlsdGVyKChpdGVtKSA9PiB0aGlzLnBvc2l0aW9uc1RvRHJhdy5maW5kSW5kZXgoKGhlcm8pID0+IGhlcm8ucG9zaXRpb24gPT09IGl0ZW0pID09PSAtMSk7XHJcblxyXG4gICAgY29uc3QgY29vcmRpbmF0ZXMgPSAoaGVybykgPT4gKHtcclxuICAgICAgeDogaGVyby5wb3NpdGlvbiAlIHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplLFxyXG4gICAgICB5OiBNYXRoLmZsb29yKGhlcm8ucG9zaXRpb24gLyB0aGlzLmdhbWVQbGF5LmJvYXJkU2l6ZSksXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBjb29yZGluYXRlc0hlcm9lcyA9IHtcclxuICAgICAgZGVmZW5kaW5nOiBjb29yZGluYXRlcyhkZWZlbmRpbmcpLFxyXG4gICAgICBhdHRhY2tlcjogY29vcmRpbmF0ZXMoYXR0YWNrZXIpLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBwcm9iYWJsZVBsYWNlcyA9ICgpID0+IHtcclxuICAgICAgLy8g0JLQu9C10LLQvlxyXG4gICAgICBpZiAoY29vcmRpbmF0ZXNIZXJvZXMuYXR0YWNrZXIueCA8PSBjb29yZGluYXRlc0hlcm9lcy5kZWZlbmRpbmcueCkge1xyXG4gICAgICAgIC8vINCS0LvQtdCy0L4g0Lgg0LLQstC10YDRhVxyXG4gICAgICAgIGlmIChjb29yZGluYXRlc0hlcm9lcy5hdHRhY2tlci55IDw9IGNvb3JkaW5hdGVzSGVyb2VzLmRlZmVuZGluZy55KSB7XHJcbiAgICAgICAgICByZXR1cm4gbW92ZW1lbnRzLmZpbHRlcihcclxuICAgICAgICAgICAgKGl0ZW0pID0+IChpdGVtICUgdGhpcy5nYW1lUGxheS5ib2FyZFNpemUgPj0gY29vcmRpbmF0ZXNIZXJvZXMuYXR0YWNrZXIueCkgXHJcbiAgICAgICAgICAgICAgJiYgKChpdGVtICUgdGhpcy5nYW1lUGxheS5ib2FyZFNpemUpIDw9IGNvb3JkaW5hdGVzSGVyb2VzLmRlZmVuZGluZy54KVxyXG4gICAgICAgICAgICAgICYmIChNYXRoLmZsb29yKGl0ZW0gLyB0aGlzLmdhbWVQbGF5LmJvYXJkU2l6ZSkgPD0gY29vcmRpbmF0ZXNIZXJvZXMuZGVmZW5kaW5nLnkpXHJcbiAgICAgICAgICAgICAgJiYgKE1hdGguZmxvb3IoaXRlbSAvIHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplKSA+PSBjb29yZGluYXRlc0hlcm9lcy5hdHRhY2tlci55KVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g0JLQu9C10LLQviDQuCDQstC90LjQt1xyXG4gICAgICAgIHJldHVybiBtb3ZlbWVudHMuZmlsdGVyKFxyXG4gICAgICAgICAgKGl0ZW0pID0+IChpdGVtICUgdGhpcy5nYW1lUGxheS5ib2FyZFNpemUgPj0gY29vcmRpbmF0ZXNIZXJvZXMuYXR0YWNrZXIueCkgXHJcbiAgICAgICAgICAgICYmICgoaXRlbSAlIHRoaXMuZ2FtZVBsYXkuQm9hcmRTaXplKSA8PSBjb29yZGluYXRlc0hlcm9lcy5kZWZlbmRpbmcueClcclxuICAgICAgICAgICAgJiYgKE1hdGguZmxvb3IoaXRlbSAvIHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplKSA+IGNvb3JkaW5hdGVzSGVyb2VzLmRlZmVuZGluZy55KVxyXG4gICAgICAgICAgICAmJiAoTWF0aC5mbG9vcihpdGVtIC8gdGhpcy5nYW1lUGxheS5ib2FyZFNpemUpIDw9IGNvb3JkaW5hdGVzSGVyb2VzLmF0dGFja2VyLnkpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g0JLQv9GA0LDQstC+XHJcbiAgICAgIC8vINCS0L/RgNCw0LLQviDQuCDQstCy0LXRgNGFXHJcbiAgICAgIGlmIChjb29yZGluYXRlc0hlcm9lcy5hdHRhY2tlci55IDw9IGNvb3JkaW5hdGVzSGVyb2VzLmRlZmVuZGluZy55KSB7XHJcbiAgICAgICAgcmV0dXJuIG1vdmVtZW50cy5maWx0ZXIoXHJcbiAgICAgICAgICAoaXRlbSkgPT4gKGl0ZW0gJSB0aGlzLmdhbWVQbGF5LmJvYXJkU2l6ZSA8PSBjb29yZGluYXRlc0hlcm9lcy5hdHRhY2tlci54KSBcclxuICAgICAgICAgICAgJiYgKChpdGVtICUgdGhpcy5nYW1lUGxheS5ib2FyZFNpemUpID4gY29vcmRpbmF0ZXNIZXJvZXMuZGVmZW5kaW5nLngpXHJcbiAgICAgICAgICAgICYmIChNYXRoLmZsb29yKGl0ZW0gLyB0aGlzLmdhbWVQbGF5LmJvYXJkU2l6ZSkgPD0gY29vcmRpbmF0ZXNIZXJvZXMuZGVmZW5kaW5nLnkpXHJcbiAgICAgICAgICAgICYmIChNYXRoLmZsb29yKGl0ZW0gLyB0aGlzLmdhbWVQbGF5LmJvYXJkU2l6ZSkgPj0gY29vcmRpbmF0ZXNIZXJvZXMuYXR0YWNrZXIueSlcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIC8vINCS0L/RgNCw0LLQviDQuCDQstC90LjQt1xyXG4gICAgICByZXR1cm4gbW92ZW1lbnRzLmZpbHRlcihcclxuICAgICAgICAoaXRlbSkgPT4gKGl0ZW0gJSB0aGlzLmdhbWVQbGF5LmJvYXJkU2l6ZSA8PSBjb29yZGluYXRlc0hlcm9lcy5hdHRhY2tlci54KSBcclxuICAgICAgICAgICYmICgoaXRlbSAlIHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplKSA+IGNvb3JkaW5hdGVzSGVyb2VzLmRlZmVuZGluZy54KVxyXG4gICAgICAgICAgJiYgKE1hdGguZmxvb3IoaXRlbSAvIHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplKSA+IGNvb3JkaW5hdGVzSGVyb2VzLmRlZmVuZGluZy55KVxyXG4gICAgICAgICAgJiYgKE1hdGguZmxvb3IoaXRlbSAvIHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplKSA8PSBjb29yZGluYXRlc0hlcm9lcy5hdHRhY2tlci55KVxyXG4gICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBwcm9iYWJsZVBsYWNlc0ZpbHRlcmVkID0gcHJvYmFibGVQbGFjZXMoKTtcclxuICAgIGlmICghcHJvYmFibGVQbGFjZXNGaWx0ZXJlZC5sZW5ndGgpIHtcclxuICAgICAgaWYgKCFtb3ZlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3Qgb3RoZXJFbmVtaWVzID0gWy4uLmVuZW1pZXNdO1xyXG4gICAgICAgIG90aGVyRW5lbWllcy5zcGxpY2UoZW5lbWllcy5pbmRleE9mKGRlZmVuZGluZyksIDEpO1xyXG4gICAgICAgIGRlZmVuZGluZyA9IG90aGVyRW5lbWllc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBvdGhlckVuZW1pZXMubGVuZ3RoKV07XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcmFuZG9tTW92ZW1lbnRzID0gdGhpcy5nZXRBcmVhTW92ZShkZWZlbmRpbmcsIGRlZmVuZGluZy5jaGFyYWN0ZXIuZGlzdGFuY2UpXHJcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gdGhpcy5wb3NpdGlvbnNUb0RyYXcuZmluZEluZGV4KChoZXJvKSA9PiBoZXJvLnBvc2l0aW9uID09PSBpdGVtKSA9PT0gLTEpO1xyXG5cclxuICAgICAgcmV0dXJuIHJhbmRvbU1vdmVtZW50c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiByYW5kb21Nb3ZlbWVudHMubGVuZ3RoKV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJvYmFibGVQbGFjZXNGaWx0ZXJlZFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwcm9iYWJsZVBsYWNlc0ZpbHRlcmVkLmxlbmd0aCldO1xyXG4gIH1cclxuXHJcbiAgY2FsY3VsYXRlRGFtYWdlKGF0dGFja2VyLCB0YXJnZXQpIHtcclxuICAgIHJldHVybiBNYXRoLm1heChcclxuICAgICAgYXR0YWNrZXIuY2hhcmFjdGVyLmF0dGFjayAtIHRhcmdldC5jaGFyYWN0ZXIuZGVmZW5jZSxcclxuICAgICAgTWF0aC5jZWlsKGF0dGFja2VyLmNoYXJhY3Rlci5hdHRhY2sgKiAwLjEpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgbW92ZUVuZW15QXR0YWNrKCkge1xyXG4gICAgdGhpcy5pc0FjdGlvbkluUHJvZ3Jlc3MgPSB0cnVlO1xyXG4gICAgdGhpcy5nYW1lUGxheS5kZXNlbGVjdEFsbCgpO1xyXG4gICAgY29uc3QgZW5lbWllcyA9IHRoaXMucG9zaXRpb25zVG9EcmF3LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5zaWRlID09PSB0aGlzLnNpZGVzLmVuZW15Lm5hbWUpO1xyXG4gICAgY29uc3QgZW5lbXlBdHRhY2tlciA9IGVuZW1pZXMuZmluZCgoaXRlbSkgPT4gaXRlbS5jaGFyYWN0ZXIuYXR0YWNrID09PSBNYXRoLm1heC5hcHBseShudWxsLCBlbmVtaWVzLm1hcCgoaGVybykgPT4gaGVyby5jaGFyYWN0ZXIuYXR0YWNrKSkpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBkYW1hZ2UgPSB0aGlzLmNhbGN1bGF0ZURhbWFnZShlbmVteUF0dGFja2VyLCB0aGlzLnNlbGVjdGVkKTtcclxuICAgICAgaWYgKHRoaXMuZ2V0QXJlYUF0dGFjayhlbmVteUF0dGFja2VyLCBlbmVteUF0dGFja2VyLmNoYXJhY3Rlci5kaXN0YW5jZUF0dGFjaylcclxuICAgICAgICAgIC5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkLnBvc2l0aW9uKSkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWQuY2hhcmFjdGVyLmhlYWx0aCA9IE1hdGgubWF4KDAsIFxyXG4gICAgICAgICAgdGhpcy5zZWxlY3RlZC5jaGFyYWN0ZXIuaGVhbHRoIC0gZGFtYWdlKTtcclxuICAgICAgICByZXNvbHZlKGRhbWFnZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVqZWN0KHsgZW5lbXlBdHRhY2tlciwgZW5lbWllcyB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvbkNlbGxDbGljayhpbmRleCkge1xyXG4gICAgaWYgKHRoaXMuaXNBY3Rpb25JblByb2dyZXNzKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplICoqIDIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgY29uc3QgYWN0aW9uQWZ0ZXJBdHRhY2sgPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMuaXNBY3Rpb25JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkICYmIHRoaXMuc2VsZWN0ZWQuY2hhcmFjdGVyLmhlYWx0aCA8PSAwKSB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbnNUb0RyYXcgPSB0aGlzLnBvc2l0aW9uc1RvRHJhdy5maWx0ZXIoY2hhciA9PiBjaGFyICE9PSB0aGlzLnNlbGVjdGVkKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdGhpcy5nYW1lUGxheS5yZWRyYXdQb3NpdGlvbnModGhpcy5wb3NpdGlvbnNUb0RyYXcpO1xyXG4gICAgICBcclxuICAgICAgLy8g0J/RgNC+0LLQtdGA0LrQsCDQvdCwINC/0YDQvtC40LPRgNGL0YhcclxuICAgICAgaWYgKCF0aGlzLnBvc2l0aW9uc1RvRHJhdy5zb21lKGNoYXIgPT4gY2hhci5zaWRlID09PSB0aGlzLnNpZGVzLnBsYXllci5uYW1lKSkge1xyXG4gICAgICAgIEdhbWVQbGF5LnNob3dNZXNzYWdlKCfQmNCz0YDQsCDQvtC60L7QvdGH0LXQvdCwIScpO1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLnNjb3JlID0gMDtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LmRyYXdVaSh0aGlzLnRoZW1lKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INCy0YvQtNC10LvQtdC90LjQtSDQtdGB0LvQuCDQv9C10YDRgdC+0L3QsNC2INC20LjQslxyXG4gICAgICBpZiAodGhpcy5zZWxlY3RlZCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZVBsYXkuc2VsZWN0Q2VsbCh0aGlzLnNlbGVjdGVkLnBvc2l0aW9uLCAneWVsbG93Jyk7XHJcbiAgICAgICAgdGhpcy5tb3ZlbWVudHMgPSB0aGlzLmdldEFyZWFNb3ZlKHRoaXMuc2VsZWN0ZWQsIHRoaXMuc2VsZWN0ZWQuY2hhcmFjdGVyLmRpc3RhbmNlKTtcclxuICAgICAgICB0aGlzLmF0dGFja3MgPSB0aGlzLmdldEFyZWFBdHRhY2sodGhpcy5zZWxlY3RlZCwgdGhpcy5zZWxlY3RlZC5jaGFyYWN0ZXIuZGlzdGFuY2VBdHRhY2spO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIFxyXG4gICAgY29uc3QgY3VycmVudFBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbnNUb0RyYXcuZmluZChpdGVtID0+IGl0ZW0ucG9zaXRpb24gPT09IGluZGV4KTtcclxuICBcclxuICAgIC8vINCS0YvQsdC+0YAg0L/QtdGA0YHQvtC90LDQttCwXHJcbiAgICBpZiAodGhpcy5zZWxlY3RlZCA9PT0gbnVsbCkge1xyXG4gICAgICBpZiAoIWN1cnJlbnRQb3NpdGlvbikgcmV0dXJuO1xyXG4gICAgICBcclxuICAgICAgaWYgKGN1cnJlbnRQb3NpdGlvbi5zaWRlID09PSB0aGlzLnNpZGVzLnBsYXllci5uYW1lKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGN1cnJlbnRQb3NpdGlvbjtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LnNlbGVjdENlbGwoaW5kZXgsICd5ZWxsb3cnKTtcclxuICAgICAgICB0aGlzLm1vdmVtZW50cyA9IHRoaXMuZ2V0QXJlYU1vdmUodGhpcy5zZWxlY3RlZCwgdGhpcy5zZWxlY3RlZC5jaGFyYWN0ZXIuZGlzdGFuY2UpO1xyXG4gICAgICAgIHRoaXMuYXR0YWNrcyA9IHRoaXMuZ2V0QXJlYUF0dGFjayh0aGlzLnNlbGVjdGVkLCB0aGlzLnNlbGVjdGVkLmNoYXJhY3Rlci5kaXN0YW5jZUF0dGFjayk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgR2FtZVBsYXkuc2hvd0Vycm9yKCfQrdGC0L4g0L/QtdGA0YHQvtC90LDQtiDQv9GA0L7RgtC40LLQvdC40LrQsCEnKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyDQn9C10YDQtdC80LXRidC10L3QuNC1XHJcbiAgICBpZiAodGhpcy5jdXJyZW50U3RhdHVzID09PSB0aGlzLnN0YXR1c2VzLmZyZWVzcGFjZSAmJiAhY3VycmVudFBvc2l0aW9uKSB7XHJcbiAgICAgIGlmICh0aGlzLm1vdmVtZW50cy5pbmNsdWRlcyhpbmRleCkpIHtcclxuICAgICAgICBjb25zdCBvbGRQb3NpdGlvbiA9IHRoaXMuc2VsZWN0ZWQucG9zaXRpb247XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZC5wb3NpdGlvbiA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMuZ2FtZVBsYXkuZGVzZWxlY3RDZWxsKG9sZFBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LnNlbGVjdENlbGwoaW5kZXgsICd5ZWxsb3cnKTtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyh0aGlzLnBvc2l0aW9uc1RvRHJhdyk7XHJcbiAgXHJcbiAgICAgICAgdGhpcy5tb3ZlRW5lbXlBdHRhY2soKVxyXG4gICAgICAgICAgLnRoZW4oXHJcbiAgICAgICAgICAgIGRhbWFnZSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKGRhbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2FtZVBsYXkuc2hvd0RhbWFnZSh0aGlzLnNlbGVjdGVkLnBvc2l0aW9uLCBkYW1hZ2UpXHJcbiAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVQbGF5LnNlbGVjdENlbGwodGhpcy5zZWxlY3RlZC5wb3NpdGlvbiwgJ3llbGxvdycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25BZnRlckF0dGFjaygpO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbkFmdGVyQXR0YWNrKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICh7ZW5lbXlBdHRhY2tlciwgZW5lbWllc30pID0+IHtcclxuICAgICAgICAgICAgICBpZiAoZW5lbXlBdHRhY2tlciAmJiBlbmVtaWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGVuZW15QXR0YWNrZXIucG9zaXRpb24gPSB0aGlzLm1vdmVEZWZlbmRpbmcoZW5lbXlBdHRhY2tlciwgdGhpcy5zZWxlY3RlZCwgZW5lbWllcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyh0aGlzLnBvc2l0aW9uc1RvRHJhdyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVQbGF5LnNlbGVjdENlbGwodGhpcy5zZWxlY3RlZC5wb3NpdGlvbiwgJ3llbGxvdycpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICByZXR1cm4gYWN0aW9uQWZ0ZXJBdHRhY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIGVuZW15IG1vdmU6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyh0aGlzLnBvc2l0aW9uc1RvRHJhdyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIC8vIC50aGVuKGFjdGlvbkFmdGVyQXR0YWNrKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyDQodC80LXQvdCwINC/0LXRgNGB0L7QvdCw0LbQsFxyXG4gICAgaWYgKGN1cnJlbnRQb3NpdGlvbiAmJiBjdXJyZW50UG9zaXRpb24uc2lkZSA9PT0gdGhpcy5zaWRlcy5wbGF5ZXIubmFtZSkge1xyXG4gICAgICB0aGlzLmdhbWVQbGF5LmRlc2VsZWN0Q2VsbCh0aGlzLnNlbGVjdGVkLnBvc2l0aW9uKTtcclxuICAgICAgdGhpcy5zZWxlY3RlZCA9IGN1cnJlbnRQb3NpdGlvbjtcclxuICAgICAgdGhpcy5nYW1lUGxheS5zZWxlY3RDZWxsKGluZGV4LCAneWVsbG93Jyk7XHJcbiAgICAgIHRoaXMubW92ZW1lbnRzID0gdGhpcy5nZXRBcmVhTW92ZSh0aGlzLnNlbGVjdGVkLCB0aGlzLnNlbGVjdGVkLmNoYXJhY3Rlci5kaXN0YW5jZSk7XHJcbiAgICAgIHRoaXMuYXR0YWNrcyA9IHRoaXMuZ2V0QXJlYUF0dGFjayh0aGlzLnNlbGVjdGVkLCB0aGlzLnNlbGVjdGVkLmNoYXJhY3Rlci5kaXN0YW5jZUF0dGFjayk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICBcclxuICAgIC8vINCQ0YLQsNC60LAg0L/RgNC+0YLQuNCy0L3QuNC60LBcclxuICAgIGlmICh0aGlzLmN1cnJlbnRTdGF0dXMgPT09IHRoaXMuc3RhdHVzZXMuZW5lbXkgJiYgXHJcbiAgICAgICAgdGhpcy5hdHRhY2tzLmluY2x1ZGVzKGluZGV4KSAmJiBcclxuICAgICAgICBjdXJyZW50UG9zaXRpb24/LnNpZGUgPT09IHRoaXMuc2lkZXMuZW5lbXkubmFtZSkge1xyXG4gICAgICBcclxuICAgICAgdGhpcy5pc0FjdGlvbkluUHJvZ3Jlc3MgPSB0cnVlO1xyXG4gICAgICBjb25zdCBkYW1hZ2UgPSB0aGlzLmNhbGN1bGF0ZURhbWFnZSh0aGlzLnNlbGVjdGVkLCBjdXJyZW50UG9zaXRpb24pO1xyXG4gICAgICBjdXJyZW50UG9zaXRpb24uY2hhcmFjdGVyLmhlYWx0aCA9IE1hdGgubWF4KDAsIGN1cnJlbnRQb3NpdGlvbi5jaGFyYWN0ZXIuaGVhbHRoIC0gZGFtYWdlKTtcclxuICBcclxuICAgICAgY29uc3QgaXNFbmVteURlYWQgPSBjdXJyZW50UG9zaXRpb24uY2hhcmFjdGVyLmhlYWx0aCA8PSAwO1xyXG4gIFxyXG4gICAgICB0aGlzLmdhbWVQbGF5LnNob3dEYW1hZ2UoaW5kZXgsIGRhbWFnZSlcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICBpZiAoaXNFbmVteURlYWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbnNUb0RyYXcgPSB0aGlzLnBvc2l0aW9uc1RvRHJhdy5maWx0ZXIoY2hhciA9PiBjaGFyICE9PSBjdXJyZW50UG9zaXRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyh0aGlzLnBvc2l0aW9uc1RvRHJhdyk7XHJcbiAgXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wb3NpdGlvbnNUb0RyYXcuc29tZShjaGFyID0+IGNoYXIuc2lkZSA9PT0gdGhpcy5zaWRlcy5lbmVteS5uYW1lKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2NvcmUgKz0gdGhpcy5wb3NpdGlvbnNUb0RyYXcucmVkdWNlKChzdW0sIGNoYXIpID0+IHN1bSArIGNoYXIuY2hhcmFjdGVyLmhlYWx0aCwgMCk7XHJcbiAgICAgICAgICAgICAgaWYgKHRoaXMubGV2ZWwgPT09IDQpIHtcclxuICAgICAgICAgICAgICAgIEdhbWVQbGF5LnNob3dNZXNzYWdlKGDQn9C+0LHQtdC00LAhINCS0LDRiCDRgdGH0LXRgiDRgNCw0LLQtdC9ICR7dGhpcy5zY29yZX0uYCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVQbGF5LmRyYXdVaSh0aGlzLnRoZW1lKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgR2FtZVBsYXkuc2hvd01lc3NhZ2UoYNCf0L7QsdC10LTQsCEg0J/QtdGA0LXRhdC+0LQg0L3QsCDRg9GA0L7QstC10L3RjCAke3RoaXMubGV2ZWwgKyAxfSEg0JLQsNGIINGB0YfQtdGCINGA0LDQstC10L0gJHt0aGlzLnNjb3JlfS5gKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubmV3R2FtZSh0aGlzLmxldmVsVXAoKSwgdGhpcy50aGVtZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5tb3ZlRW5lbXlBdHRhY2soKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKFxyXG4gICAgICAgICAgZGFtYWdlID0+IHtcclxuICAgICAgICAgICAgaWYgKGRhbWFnZSAmJiB0aGlzLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZC5jaGFyYWN0ZXIuaGVhbHRoID0gTWF0aC5tYXgoMCwgdGhpcy5zZWxlY3RlZC5jaGFyYWN0ZXIuaGVhbHRoIC0gZGFtYWdlKTtcclxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nYW1lUGxheS5zaG93RGFtYWdlKHRoaXMuc2VsZWN0ZWQucG9zaXRpb24sIGRhbWFnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAoe2VuZW15QXR0YWNrZXIsIGVuZW1pZXN9KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlbmVteUF0dGFja2VyICYmIGVuZW1pZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgIGVuZW15QXR0YWNrZXIucG9zaXRpb24gPSB0aGlzLm1vdmVEZWZlbmRpbmcoZW5lbXlBdHRhY2tlciwgdGhpcy5zZWxlY3RlZCwgZW5lbWllcyk7XHJcbiAgICAgICAgICAgICAgdGhpcy5nYW1lUGxheS5yZWRyYXdQb3NpdGlvbnModGhpcy5wb3NpdGlvbnNUb0RyYXcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICAgIC50aGVuKGFjdGlvbkFmdGVyQXR0YWNrKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgR2FtZVBsYXkuc2hvd0Vycm9yKCfQndC10LTQvtC/0YPRgdGC0LjQvNC+0LUg0LTQtdC50YHRgtCy0LjQtSEnKTtcclxuICB9XHJcblxyXG4gIG9uQ2VsbEVudGVyKGluZGV4KSB7XHJcbiAgICBpZiAoIWluZGV4ICYmIGluZGV4ICE9PSAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICBcclxuICAgIC8vINCf0L7QutCw0LfRi9Cy0LDQtdC8INC40L3RhNC+0YDQvNCw0YbQuNGOINC+INC/0LXRgNGB0L7QvdCw0LbQtVxyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5wb3NpdGlvbnNUb0RyYXcpKSB7XHJcbiAgICAgIGNvbnN0IGNoYXJhY3RlciA9IHRoaXMucG9zaXRpb25zVG9EcmF3LmZpbmQoaXRlbSA9PiBpdGVtLnBvc2l0aW9uID09PSBpbmRleCk7XHJcbiAgICAgIGlmIChjaGFyYWN0ZXIpIHtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LnNob3dDZWxsVG9vbHRpcChmb3JtYXRDaGFyYWN0ZXJJbmZvKGNoYXJhY3Rlci5jaGFyYWN0ZXIpLCBpbmRleCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBcclxuICAgIC8vINCV0YHQu9C4INC/0LXRgNGB0L7QvdCw0LYg0LLRi9Cx0YDQsNC9LCDQv9C+0LrQsNC30YvQstCw0LXQvCDQtNC+0YHRgtGD0L/QvdGL0LUg0LTQtdC50YHRgtCy0LjRj1xyXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWQpIHtcclxuICAgICAgY29uc3QgYWN0aW9ucyA9IHtcclxuICAgICAgICBkaXN0YW5jZTogdGhpcy5zZWxlY3RlZC5jaGFyYWN0ZXIuZGlzdGFuY2UsXHJcbiAgICAgICAgZGlzdGFuY2VBdHRhY2s6IHRoaXMuc2VsZWN0ZWQuY2hhcmFjdGVyLmRpc3RhbmNlQXR0YWNrLFxyXG4gICAgICB9O1xyXG4gIFxyXG4gICAgICAvLyDQoNCw0YHRgdGH0LjRgtGL0LLQsNC10Lwg0LfQvtC90Ysg0LTQstC40LbQtdC90LjRjyBcclxuICAgICAgdGhpcy5tb3ZlbWVudHMgPSB0aGlzLmdldEFyZWFNb3ZlKHRoaXMuc2VsZWN0ZWQsIGFjdGlvbnMuZGlzdGFuY2UpO1xyXG4gIFxyXG4gICAgICAvLyDQoNCw0YHRgdGH0LjRgtGL0LLQsNC10Lwg0LfQvtC90Ysg0LDRgtCw0LrQuFxyXG4gICAgICB0aGlzLmF0dGFja3MgPSB0aGlzLmdldEFyZWFBdHRhY2sodGhpcy5zZWxlY3RlZCwgYWN0aW9ucy5kaXN0YW5jZUF0dGFjayk7XHJcblxyXG4gICAgICBjb25zdCB0YXJnZXRDaGFyYWN0ZXIgPSB0aGlzLnBvc2l0aW9uc1RvRHJhdy5maW5kKGl0ZW0gPT4gaXRlbS5wb3NpdGlvbiA9PT0gaW5kZXgpO1xyXG5cclxuICAgICAgLy8g0KHQvdCw0YfQsNC70LAg0L/RgNC+0LLQtdGA0Y/QtdC8INCy0L7Qt9C80L7QttC90L7RgdGC0Ywg0LDRgtCw0LrQuCDQv9GA0L7RgtC40LLQvdC40LrQsFxyXG4gICAgICBpZiAodGhpcy5hdHRhY2tzLmluY2x1ZGVzKGluZGV4KSAmJiB0YXJnZXRDaGFyYWN0ZXIgJiYgXHJcbiAgICAgICAgICB0YXJnZXRDaGFyYWN0ZXIuc2lkZSA9PT0gdGhpcy5zaWRlcy5lbmVteS5uYW1lKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lUGxheS5zZWxlY3RDZWxsKGluZGV4LCAncmVkJyk7XHJcbiAgICAgICAgdGhpcy5nYW1lUGxheS5zZXRDdXJzb3IoY3Vyc29ycy5jcm9zc2hhaXIpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFN0YXR1cyA9IHRoaXMuc3RhdHVzZXMuZW5lbXk7XHJcbiAgICAgIH1cclxuICAgICAgLy8g0JfQsNGC0LXQvCDQv9GA0L7QstC10YDRj9C10Lwg0LLQvtC30LzQvtC20L3QvtGB0YLRjCDQtNCy0LjQttC10L3QuNGPICjRgtC+0LvRjNC60L4g0LXRgdC70Lgg0LrQu9C10YLQutCwINGB0LLQvtCx0L7QtNC90LApXHJcbiAgICAgIGVsc2UgaWYgKHRoaXMubW92ZW1lbnRzLmluY2x1ZGVzKGluZGV4KSAmJiAhdGFyZ2V0Q2hhcmFjdGVyKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lUGxheS5zZWxlY3RDZWxsKGluZGV4LCAnZ3JlZW4nKTtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LnNldEN1cnNvcihjdXJzb3JzLnBvaW50ZXIpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFN0YXR1cyA9IHRoaXMuc3RhdHVzZXMuZnJlZXNwYWNlO1xyXG4gICAgICB9XHJcbiAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0L3QtSDRgdC+0Y7Qt9C90LjQuiDQu9C4INGN0YLQvlxyXG4gICAgICBlbHNlIGlmICh0YXJnZXRDaGFyYWN0ZXIgJiYgdGFyZ2V0Q2hhcmFjdGVyLnNpZGUgPT09IHRoaXMuc2lkZXMucGxheWVyLm5hbWUpIHtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LnNldEN1cnNvcihjdXJzb3JzLnBvaW50ZXIpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFN0YXR1cyA9IHRoaXMuc3RhdHVzZXMuYWxsaWVkO1xyXG4gICAgICB9XHJcbiAgICAgIC8vINCSINC+0YHRgtCw0LvRjNC90YvRhSDRgdC70YPRh9Cw0Y/RhSDQtNC10LnRgdGC0LLQuNC1INC30LDQv9GA0LXRidC10L3QvlxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LnNldEN1cnNvcihjdXJzb3JzLm5vdGFsbG93ZWQpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFN0YXR1cyA9IHRoaXMuc3RhdHVzZXMubm90YWxsb3dlZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25DZWxsTGVhdmUoaW5kZXgpIHtcclxuICAgIHRoaXMuZ2FtZVBsYXkuaGlkZUNlbGxUb29sdGlwKGluZGV4KTtcclxuICAgIGlmICh0aGlzLnNlbGVjdGVkICYmIGluZGV4ICE9PSB0aGlzLnNlbGVjdGVkLnBvc2l0aW9uKSB7XHJcbiAgICAgIHRoaXMuZ2FtZVBsYXkuZGVzZWxlY3RDZWxsKGluZGV4KTtcclxuICAgIH1cclxuICAgIHRoaXMuZ2FtZVBsYXkuc2V0Q3Vyc29yKGN1cnNvcnMuYXV0byk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJHYW1lUGxheSIsImNvbnN0cnVjdG9yIiwiYm9hcmRTaXplIiwidGhpcyIsImNvbnRhaW5lciIsImJvYXJkRWwiLCJjZWxscyIsImNlbGxDbGlja0xpc3RlbmVycyIsImNlbGxFbnRlckxpc3RlbmVycyIsImNlbGxMZWF2ZUxpc3RlbmVycyIsIm5ld0dhbWVMaXN0ZW5lcnMiLCJzYXZlR2FtZUxpc3RlbmVycyIsImxvYWRHYW1lTGlzdGVuZXJzIiwiZXNjTGlzdGVuZXIiLCJiaW5kVG9ET00iLCJIVE1MRWxlbWVudCIsIkVycm9yIiwiZHJhd1VpIiwidGhlbWUiLCJjaGVja0JpbmRpbmciLCJpbm5lckhUTUwiLCJuZXdHYW1lRWwiLCJxdWVyeVNlbGVjdG9yIiwic2F2ZUdhbWVFbCIsImxvYWRHYW1lRWwiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJvbk5ld0dhbWVDbGljayIsIm9uU2F2ZUdhbWVDbGljayIsIm9uTG9hZEdhbWVDbGljayIsImRvY3VtZW50Iiwib25Fc2MiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJpIiwiY2VsbEVsIiwiY3JlYXRlRWxlbWVudCIsImluZGV4Iiwib25DZWxsRW50ZXIiLCJvbkNlbGxMZWF2ZSIsIm9uQ2VsbENsaWNrIiwiYXBwZW5kQ2hpbGQiLCJBcnJheSIsImZyb20iLCJjaGlsZHJlbiIsInJlZHJhd1Bvc2l0aW9ucyIsInBvc2l0aW9ucyIsImNlbGwiLCJwb3NpdGlvbiIsImNoYXJFbCIsImNoYXJhY3RlciIsInR5cGUiLCJoZWFsdGhFbCIsImhlYWx0aEluZGljYXRvckVsIiwiaGVhbHRoIiwic3R5bGUiLCJ3aWR0aCIsImFkZENlbGxFbnRlckxpc3RlbmVyIiwiY2FsbGJhY2siLCJwdXNoIiwiYWRkQ2VsbExlYXZlTGlzdGVuZXIiLCJhZGRDZWxsQ2xpY2tMaXN0ZW5lciIsImFkZE5ld0dhbWVMaXN0ZW5lciIsImFkZFNhdmVHYW1lTGlzdGVuZXIiLCJhZGRMb2FkR2FtZUxpc3RlbmVyIiwiYWRkRXNjTGlzdGVuZXIiLCJiaW5kIiwicHJldmVudERlZmF1bHQiLCJpbmRleE9mIiwiY3VycmVudFRhcmdldCIsImZvckVhY2giLCJvIiwiY2FsbCIsImtleSIsInNob3dFcnJvciIsIm1lc3NhZ2UiLCJhbGVydCIsInNob3dNZXNzYWdlIiwic2VsZWN0Q2VsbCIsImNvbG9yIiwiZGVzZWxlY3RDZWxsIiwicmVtb3ZlIiwiZmlsdGVyIiwic3RhcnRzV2l0aCIsImRlc2VsZWN0QWxsIiwic2hvd0NlbGxUb29sdGlwIiwidGl0bGUiLCJoaWRlQ2VsbFRvb2x0aXAiLCJzaG93RGFtYWdlIiwiZGFtYWdlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJkYW1hZ2VFbCIsInRleHRDb250ZW50IiwicmVtb3ZlQ2hpbGQiLCJzZXRDdXJzb3IiLCJjdXJzb3IiLCJHYW1lU3RhdGUiLCJjdXJyZW50U3RlcCIsIm9iamVjdCIsImlzQXJyYXkiLCJsZXZlbCIsInBvc2l0aW9uc1RvRHJhdyIsInNjb3JlIiwiVGVhbSIsImNoYXJhY3RlcnMiLCJTZXQiLCJoYXMiLCJhZGRBbGwiLCJsZW5ndGgiLCJlIiwidG9BcnJheSIsImdlbmVyYXRlVGVhbSIsImFsbG93ZWRUeXBlcyIsIm1heExldmVsIiwiY2hhcmFjdGVyQ291bnQiLCJnZW5lcmF0b3IiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjaGFyYWN0ZXJHZW5lcmF0b3IiLCJ0ZWFtIiwibmV4dEhlcm8iLCJuZXh0IiwidmFsdWUiLCJDaGFyYWN0ZXIiLCJhdHRhY2siLCJkZWZlbmNlIiwiZGlzdGFuY2UiLCJkaXN0YW5jZUF0dGFjayIsIm5hbWUiLCJQb3NpdGlvbmVkQ2hhcmFjdGVyIiwic2lkZSIsIm51bVBvc2l0aW9uIiwicGFyc2VJbnQiLCJOdW1iZXIiLCJpc05hTiIsIkJvd21hbiIsInN1cGVyIiwiU3dvcmRzbWFuIiwiTWFnaWNpYW4iLCJWYW1waXJlIiwiVW5kZWFkIiwiRGVhbW9uIiwiZ2FtZVBsYXkiLCJzdGF0ZVNlcnZpY2UiLCJzdG9yYWdlIiwic2F2ZSIsInN0YXRlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJsb2FkIiwiZGF0YSIsImdldEl0ZW0iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdhbWVDdHJsIiwic2lkZXMiLCJwbGF5ZXIiLCJmaXJzdCIsInNlY29uZCIsImVuZW15IiwiRGFlbW9uIiwic3RhdHVzZXMiLCJmcmVlc3BhY2UiLCJhbGxpZWQiLCJub3RhbGxvd2VkIiwibW92ZW1lbnRzIiwic2VsZWN0ZWQiLCJjdXJyZW50U3RhdHVzIiwiaXNBY3Rpb25JblByb2dyZXNzIiwiYXJlYSIsImdldFJvd0FycmF5IiwiaW5pdCIsImxvYWRlZCIsInNlc3Npb25TdG9yYWdlIiwibG9hZFN0YXRlIiwidGhlbWVzIiwibW91c2VFdmVudHMiLCJ3aW5kb3ciLCJuZXdHYW1lIiwic2F2ZUdhbWUiLCJsb2FkR2FtZSIsImFycmF5Iiwicm93Iiwic2lkZVBvc2l0aW9ucyIsImZpZWxkIiwiaXRlbSIsIm1hcCIsImdldFBvc2l0aW9uIiwic3BsaWNlIiwiaGVybyIsInBsYXllckZpbHRlcmVkIiwiZmluZCIsInN1cnZpdm9yc1BsYXllciIsInBsYXllclRlYW0iLCJlbmVteVRlYW0iLCJmbGF0IiwiY2xlYXIiLCJsZXZlbFVwIiwiY2VpbCIsIm1heCIsInJvd0FyciIsImdldEFyZWFNb3ZlIiwiY3VycmVudFBvc2l0aW9uIiwiY29sdW1uIiwiYXJlYU1vdmUiLCJtb3ZlRGlzdGFuY2UiLCJyaWdodE9yTGVmdCIsInVwT3JEb3duIiwicG9zIiwidW5kZWZpbmVkIiwiZ2V0QXJlYUF0dGFjayIsImFyZWFBdHRhY2siLCJqIiwibW92ZURlZmVuZGluZyIsImRlZmVuZGluZyIsImF0dGFja2VyIiwiZW5lbWllcyIsImZpbmRJbmRleCIsImNvb3JkaW5hdGVzIiwieCIsInkiLCJjb29yZGluYXRlc0hlcm9lcyIsInByb2JhYmxlUGxhY2VzRmlsdGVyZWQiLCJwcm9iYWJsZVBsYWNlcyIsIkJvYXJkU2l6ZSIsIm90aGVyRW5lbWllcyIsInJhbmRvbU1vdmVtZW50cyIsImNhbGN1bGF0ZURhbWFnZSIsInRhcmdldCIsIm1vdmVFbmVteUF0dGFjayIsImVuZW15QXR0YWNrZXIiLCJhcHBseSIsInJlamVjdCIsImluY2x1ZGVzIiwiYWN0aW9uQWZ0ZXJBdHRhY2siLCJjaGFyIiwic29tZSIsImF0dGFja3MiLCJpc0VuZW15RGVhZCIsInRoZW4iLCJyZWR1Y2UiLCJzdW0iLCJvbGRQb3NpdGlvbiIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwiZm9ybWF0Q2hhcmFjdGVySW5mbyIsImFjdGlvbnMiLCJ0YXJnZXRDaGFyYWN0ZXIiLCJjdXJzb3JzIl0sInNvdXJjZVJvb3QiOiIifQ==